---
title: Image Understanding API | Vision AI Analysis | LaoZhang API
sidebarTitle: Vision API
description: Use AI models for intelligent image analysis and understanding. Object recognition, scene description, OCR text extraction and more through OpenAI-compatible API.
icon: "eye"
---

## Overview

LaoZhang API provides powerful image understanding capabilities through multiple advanced AI models. Using the unified OpenAI API format, you can easily implement image recognition, scene description, OCR text extraction and more.

<Note>
**üîç Intelligent Visual Analysis**
Support for object recognition, scene understanding, text extraction, sentiment analysis and various other vision tasks - let AI truly "see" and understand images.
</Note>

## üåü Key Features

- **üéØ Multiple Models**: GPT-4o, Gemini 2.5 Pro, Claude and other top vision models
- **üì∏ Flexible Input**: Support for URL links and Base64-encoded images
- **‚ö° Fast Response**: High-performance inference with sub-second results
- **üí∞ Cost Control**: Multiple model options to fit different budgets
- **üîÑ OpenAI Compatible**: Drop-in replacement for OpenAI vision APIs

## üìã Supported Vision Models

| Model Name | Model ID | Features | Recommended Use |
|---------|---------|------|----------|
| **GPT-4o** ‚≠ê | `gpt-4o` | Strong overall capabilities, accurate recognition | General image understanding |
| **GPT-4.1 Mini** | `gpt-4.1-mini` | Lightweight, fast, low cost | Batch processing |
| **Gemini 2.5 Pro** ‚≠ê | `gemini-2.5-pro` | Ultra-long context, rich details | Complex scene analysis |
| **Gemini 2.5 Flash** | `gemini-2.5-flash` | Extremely fast, high value | Real-time applications |
| **Claude 3.5 Sonnet** | `claude-3-5-sonnet` | Deep understanding, accurate descriptions | Professional analysis |

## üöÄ Quick Start

### 1. Basic Example - Image URL

```python
import requests

url = "https://api.laozhang.ai/v1/chat/completions"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

payload = {
    "model": "gpt-4o",
    "messages": [
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "Please describe this image in detail"
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": "https://example.com/image.jpg"
                    }
                }
            ]
        }
    ]
}

response = requests.post(url, headers=headers, json=payload)
result = response.json()
print(result['choices'][0]['message']['content'])
```

### 2. Local Image Example - Base64 Encoding

```python
import base64
import requests

def image_to_base64(image_path):
    """Convert local image to base64 encoding"""
    with open(image_path, "rb") as image_file:
        return base64.b64encode(image_file.read()).decode('utf-8')

# Read local image
base64_image = image_to_base64("path/to/your/image.jpg")

url = "https://api.laozhang.ai/v1/chat/completions"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

payload = {
    "model": "gemini-2.5-pro",
    "messages": [
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "Extract all text content from this image"
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": f"data:image/jpeg;base64,{base64_image}"
                    }
                }
            ]
        }
    ]
}

response = requests.post(url, headers=headers, json=payload)
print(response.json()['choices'][0]['message']['content'])
```

### 3. Advanced Example - Multi-Image Comparison

```python
import requests

url = "https://api.laozhang.ai/v1/chat/completions"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

payload = {
    "model": "gpt-4o",
    "messages": [
        {
            "role": "user",
            "content": [
                {"type": "text", "text": "Compare the differences between these two images:"},
                {
                    "type": "image_url",
                    "image_url": {"url": "https://example.com/image1.jpg"}
                },
                {
                    "type": "image_url",
                    "image_url": {"url": "https://example.com/image2.jpg"}
                }
            ]
        }
    ],
    "max_tokens": 1000
}

response = requests.post(url, headers=headers, json=payload)
print(response.json()['choices'][0]['message']['content'])
```

## üéØ Common Use Cases

### 1. Product Recognition & Analysis
```python
prompt = """
Analyze this product image, including:
1. Product type and brand
2. Key features and selling points
3. Target audience
4. Suggested marketing copy
"""
```

### 2. Document OCR Recognition
```python
prompt = """
Extract all text content from the image and organize it in the original format.
If there are tables, present them in Markdown table format.
"""
```

### 3. Medical Imaging Assistance
```python
prompt = """
This is a medical image, please:
1. Describe basic information (imaging type, body part, etc.)
2. Identify visible anatomical structures
3. Note: For reference only, not for diagnostic purposes
"""
```

### 4. Security Monitoring Scene Analysis
```python
prompt = """
Analyze the surveillance footage, identifying:
1. Number and location of people in the scene
2. Any abnormal behaviors
3. Environmental safety hazards
4. Timestamp information (if visible)
"""
```

## üí° Best Practices

### Image Preprocessing Guidelines

1. **Format Support**: JPEG, PNG, GIF, WebP and other mainstream formats
2. **Size Limit**: Recommend max 20MB per image
3. **Resolution**: Higher resolution images get better recognition results
4. **Compression**: Moderate compression improves transmission speed

### Prompt Optimization

```python
# ‚ùå Not Recommended: Vague prompts
prompt = "What is this"

# ‚úÖ Recommended: Specific and clear prompts
prompt = """
Analyze this image from the following aspects:
1. Main objects: Identify primary objects or people
2. Scene environment: Describe location and environmental features
3. Color composition: Analyze color scheme and composition
4. Emotional atmosphere: Mood or atmosphere conveyed
5. Potential uses: Suitable scenarios for this image
"""
```

### Error Handling

```python
import requests
from requests.exceptions import RequestException

def analyze_image_with_retry(image_url, prompt, max_retries=3):
    """Image analysis function with retry mechanism"""
    for attempt in range(max_retries):
        try:
            response = requests.post(
                "https://api.laozhang.ai/v1/chat/completions",
                headers={
                    "Authorization": f"Bearer {API_KEY}",
                    "Content-Type": "application/json"
                },
                json={
                    "model": "gpt-4o",
                    "messages": [{
                        "role": "user",
                        "content": [
                            {"type": "text", "text": prompt},
                            {"type": "image_url", "image_url": {"url": image_url}}
                        ]
                    }]
                },
                timeout=30
            )

            if response.status_code == 200:
                return response.json()
            elif response.status_code == 429:
                print(f"Rate limited, retrying... (attempt {attempt + 1}/{max_retries})")
                time.sleep(2 ** attempt)  # Exponential backoff
            else:
                print(f"Error: {response.status_code} - {response.text}")

        except RequestException as e:
            print(f"Request exception: {e}")

    return None
```

## üîß Advanced Features

### 1. Streaming Output

For long analyses, use streaming for better user experience:

```python
payload = {
    "model": "gpt-4o",
    "messages": [...],
    "stream": True
}

response = requests.post(url, headers=headers, json=payload, stream=True)
for line in response.iter_lines():
    if line:
        print(line.decode('utf-8'))
```

### 2. Multi-turn Dialogue

Maintain context for in-depth analysis:

```python
messages = [
    {
        "role": "user",
        "content": [
            {"type": "text", "text": "What animal is this?"},
            {"type": "image_url", "image_url": {"url": "animal.jpg"}}
        ]
    },
    {
        "role": "assistant",
        "content": "This is a Golden Retriever."
    },
    {
        "role": "user",
        "content": [{"type": "text", "text": "How old does it look? What's its health condition?"}]
    }
]
```

### 3. Function Calling Integration

```python
tools = [
    {
        "type": "function",
        "function": {
            "name": "save_image_analysis",
            "description": "Save image analysis results to database",
            "parameters": {
                "type": "object",
                "properties": {
                    "objects": {"type": "array", "items": {"type": "string"}},
                    "scene": {"type": "string"},
                    "text_content": {"type": "string"}
                }
            }
        }
    }
]

payload = {
    "model": "gpt-4o",
    "messages": messages,
    "tools": tools,
    "tool_choice": "auto"
}
```

## üìä Performance Comparison

| Model | Response Speed | Recognition Accuracy | Multilingual Support | Price |
|------|---------|-----------|---------|------|
| GPT-4o | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | $$ |
| Gemini 2.5 Pro | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | $$ |
| Gemini 2.5 Flash | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | $ |
| GPT-4.1 Mini | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | $ |

## üö® Important Notes

1. **Privacy Protection**: Don't upload images containing sensitive information
2. **Compliance**: Follow relevant laws and regulations, avoid illegal uses
3. **Result Verification**: AI analysis results are for reference only - verify for critical decisions
4. **Cost Control**: Choose appropriate models to avoid unnecessary expenses

## üîó Related Resources

- [Chat Completions API](/en/api-reference/chat-completions) - Learn more about the Chat API
- [Pricing Information](/en/pricing) - View model pricing details

<Note>
üí° **Tip**: Start with GPT-4.1 Mini or Gemini 2.5 Flash for testing, then upgrade to premium models for production deployment.
</Note>
