---
title: å›¾åƒç†è§£ï¼ˆè¯†å›¾ï¼‰API
description: ä½¿ç”¨ AI æ¨¡å‹è¿›è¡Œæ™ºèƒ½å›¾åƒåˆ†æå’Œç†è§£ï¼Œæ”¯æŒå¯¹è±¡è¯†åˆ«ã€åœºæ™¯æè¿°ã€æ–‡å­—æå–ç­‰åŠŸèƒ½
icon: "eye"
---

# å›¾åƒç†è§£ï¼ˆè¯†å›¾ï¼‰API

APIæ˜“ æä¾›å¼ºå¤§çš„å›¾åƒç†è§£èƒ½åŠ›ï¼Œæ”¯æŒä½¿ç”¨å¤šç§å…ˆè¿›çš„ AI æ¨¡å‹å¯¹å›¾åƒè¿›è¡Œæ·±åº¦åˆ†æå’Œç†è§£ã€‚é€šè¿‡ç»Ÿä¸€çš„ OpenAI API æ ¼å¼ï¼Œæ‚¨å¯ä»¥è½»æ¾å®ç°å›¾åƒè¯†åˆ«ã€åœºæ™¯æè¿°ã€OCR æ–‡å­—è¯†åˆ«ç­‰åŠŸèƒ½ã€‚

<Note>
**ğŸ” æ™ºèƒ½è§†è§‰åˆ†æ**  
æ”¯æŒå¯¹è±¡è¯†åˆ«ã€åœºæ™¯ç†è§£ã€æ–‡å­—æå–ã€æƒ…æ„Ÿåˆ†æç­‰å¤šç§è§†è§‰ä»»åŠ¡ï¼Œè®© AI çœŸæ­£"çœ‹æ‡‚"å›¾ç‰‡ã€‚
</Note>

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **ğŸ¯ å¤šæ¨¡å‹æ”¯æŒ**ï¼šGPT-4oã€Gemini 2.5 Proã€Claude ç­‰é¡¶çº§è§†è§‰æ¨¡å‹
- **ğŸ“¸ çµæ´»è¾“å…¥**ï¼šæ”¯æŒ URL é“¾æ¥å’Œ Base64 ç¼–ç å›¾ç‰‡
- **ğŸŒ ä¸­æ–‡ä¼˜åŒ–**ï¼šå®Œç¾æ”¯æŒä¸­æ–‡åœºæ™¯ç†è§£å’Œæ–‡å­—è¯†åˆ«
- **âš¡ å¿«é€Ÿå“åº”**ï¼šé«˜æ€§èƒ½æ¨ç†ï¼Œç§’çº§è¿”å›ç»“æœ
- **ğŸ’° æˆæœ¬å¯æ§**ï¼šå¤šç§æ¨¡å‹é€‰æ‹©ï¼Œæ»¡è¶³ä¸åŒé¢„ç®—éœ€æ±‚

## ğŸ“‹ æ”¯æŒçš„è§†è§‰æ¨¡å‹

| æ¨¡å‹åç§° | æ¨¡å‹ ID | ç‰¹ç‚¹ | æ¨èåœºæ™¯ |
|---------|---------|------|----------|
| **GPT-4o** â­ | `gpt-4o` | ç»¼åˆèƒ½åŠ›å¼ºï¼Œè¯†åˆ«å‡†ç¡® | é€šç”¨å›¾åƒç†è§£ |
| **GPT-4.1 Mini** | `gpt-4.1-mini` | è½»é‡å¿«é€Ÿï¼Œæˆæœ¬ä½ | æ‰¹é‡å¤„ç† |
| **Gemini 2.5 Pro** â­ | `gemini-2.5-pro` | è¶…é•¿ä¸Šä¸‹æ–‡ï¼Œç»†èŠ‚ä¸°å¯Œ | å¤æ‚åœºæ™¯åˆ†æ |
| **Gemini 2.5 Flash** | `gemini-2.5-flash` | é€Ÿåº¦æå¿«ï¼Œæ€§ä»·æ¯”é«˜ | å®æ—¶åº”ç”¨ |
| **Claude 3.5 Sonnet** | `claude-3-5-sonnet` | ç†è§£æ·±å…¥ï¼Œæè¿°å‡†ç¡® | ä¸“ä¸šåˆ†æ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åŸºç¡€ç¤ºä¾‹ - å›¾ç‰‡ URL

```python
import requests

url = "https://api.apiyi.com/v1/chat/completions"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

payload = {
    "model": "gpt-4o",
    "messages": [
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "è¯·è¯¦ç»†æè¿°è¿™å¼ å›¾ç‰‡çš„å†…å®¹"
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": "https://example.com/image.jpg"
                    }
                }
            ]
        }
    ]
}

response = requests.post(url, headers=headers, json=payload)
result = response.json()
print(result['choices'][0]['message']['content'])
```

### 2. æœ¬åœ°å›¾ç‰‡ç¤ºä¾‹ - Base64 ç¼–ç 

```python
import base64
import requests

def image_to_base64(image_path):
    """å°†æœ¬åœ°å›¾ç‰‡è½¬æ¢ä¸º base64 ç¼–ç """
    with open(image_path, "rb") as image_file:
        return base64.b64encode(image_file.read()).decode('utf-8')

# è¯»å–æœ¬åœ°å›¾ç‰‡
base64_image = image_to_base64("path/to/your/image.jpg")

url = "https://api.apiyi.com/v1/chat/completions"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

payload = {
    "model": "gemini-2.5-pro",
    "messages": [
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "åˆ†æè¿™å¼ å›¾ç‰‡ä¸­çš„æ‰€æœ‰æ–‡å­—å†…å®¹"
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": f"data:image/jpeg;base64,{base64_image}"
                    }
                }
            ]
        }
    ]
}

response = requests.post(url, headers=headers, json=payload)
print(response.json()['choices'][0]['message']['content'])
```

### 3. é«˜çº§ç¤ºä¾‹ - å¤šå›¾å¯¹æ¯”åˆ†æ

```python
import requests

url = "https://api.apiyi.com/v1/chat/completions"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

payload = {
    "model": "gpt-4o",
    "messages": [
        {
            "role": "user",
            "content": [
                {"type": "text", "text": "è¯·å¯¹æ¯”è¿™ä¸¤å¼ å›¾ç‰‡çš„å·®å¼‚ï¼š"},
                {
                    "type": "image_url",
                    "image_url": {"url": "https://example.com/image1.jpg"}
                },
                {
                    "type": "image_url", 
                    "image_url": {"url": "https://example.com/image2.jpg"}
                }
            ]
        }
    ],
    "max_tokens": 1000
}

response = requests.post(url, headers=headers, json=payload)
print(response.json()['choices'][0]['message']['content'])
```

## ğŸ¯ å¸¸è§åº”ç”¨åœºæ™¯

### 1. å•†å“è¯†åˆ«ä¸åˆ†æ
```python
prompt = """
è¯·åˆ†æè¿™å¼ å•†å“å›¾ç‰‡ï¼ŒåŒ…æ‹¬ï¼š
1. å•†å“ç±»å‹å’Œå“ç‰Œ
2. ä¸»è¦ç‰¹å¾å’Œå–ç‚¹
3. é€‚åˆçš„ç›®æ ‡ç”¨æˆ·
4. å»ºè®®çš„è¥é”€æ–‡æ¡ˆ
"""
```

### 2. æ–‡æ¡£ OCR è¯†åˆ«
```python
prompt = """
è¯·æå–å›¾ç‰‡ä¸­çš„æ‰€æœ‰æ–‡å­—å†…å®¹ï¼Œå¹¶æŒ‰ç…§åŸå§‹æ ¼å¼æ•´ç†è¾“å‡ºã€‚
å¦‚æœæœ‰è¡¨æ ¼ï¼Œè¯·ç”¨ Markdown è¡¨æ ¼æ ¼å¼å‘ˆç°ã€‚
"""
```

### 3. åŒ»å­¦å½±åƒè¾…åŠ©åˆ†æ
```python
prompt = """
è¿™æ˜¯ä¸€å¼ åŒ»å­¦å½±åƒå›¾ç‰‡ï¼Œè¯·ï¼š
1. æè¿°å›¾åƒçš„åŸºæœ¬ä¿¡æ¯ï¼ˆå¦‚æˆåƒç±»å‹ã€éƒ¨ä½ç­‰ï¼‰
2. æ ‡æ³¨å¯è§çš„è§£å‰–ç»“æ„
3. æ³¨æ„ï¼šä»…ä¾›å‚è€ƒï¼Œä¸ä½œä¸ºè¯Šæ–­ä¾æ®
"""
```

### 4. å®‰å…¨ç›‘æ§åœºæ™¯åˆ†æ
```python
prompt = """
åˆ†æç›‘æ§ç”»é¢ï¼Œè¯†åˆ«ï¼š
1. åœºæ™¯ä¸­çš„äººæ•°å’Œä½ç½®
2. æ˜¯å¦æœ‰å¼‚å¸¸è¡Œä¸º
3. ç¯å¢ƒå®‰å…¨éšæ‚£
4. æ—¶é—´æˆ³ä¿¡æ¯ï¼ˆå¦‚æœå¯è§ï¼‰
"""
```

## ğŸ’¡ æœ€ä½³å®è·µ

### å›¾ç‰‡é¢„å¤„ç†å»ºè®®

1. **æ ¼å¼æ”¯æŒ**ï¼šJPEGã€PNGã€GIFã€WebP ç­‰ä¸»æµæ ¼å¼
2. **å¤§å°é™åˆ¶**ï¼šå»ºè®®å•å¼ å›¾ç‰‡ä¸è¶…è¿‡ 20MB
3. **åˆ†è¾¨ç‡**ï¼šé«˜åˆ†è¾¨ç‡å›¾ç‰‡ä¼šè·å¾—æ›´å¥½çš„è¯†åˆ«æ•ˆæœ
4. **å‹ç¼©ä¼˜åŒ–**ï¼šé€‚åº¦å‹ç¼©ä»¥æé«˜ä¼ è¾“é€Ÿåº¦

### æç¤ºè¯ä¼˜åŒ–

```python
# âŒ ä¸æ¨èï¼šæ¨¡ç³Šçš„æç¤º
prompt = "çœ‹çœ‹è¿™æ˜¯ä»€ä¹ˆ"

# âœ… æ¨èï¼šå…·ä½“æ˜ç¡®çš„æç¤º
prompt = """
è¯·ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢åˆ†æè¿™å¼ å›¾ç‰‡ï¼š
1. ä¸»è¦å¯¹è±¡ï¼šè¯†åˆ«å›¾ç‰‡ä¸­çš„ä¸»è¦ç‰©ä½“æˆ–äººç‰©
2. åœºæ™¯ç¯å¢ƒï¼šæè¿°æ‹æ‘„åœ°ç‚¹å’Œç¯å¢ƒç‰¹å¾
3. è‰²å½©æ„å›¾ï¼šåˆ†æé…è‰²æ–¹æ¡ˆå’Œæ„å›¾ç‰¹ç‚¹
4. æƒ…æ„Ÿæ°›å›´ï¼šå›¾ç‰‡ä¼ è¾¾çš„æƒ…ç»ªæˆ–æ°›å›´
5. å¯èƒ½ç”¨é€”ï¼šè¿™å¼ å›¾ç‰‡é€‚åˆç”¨äºä»€ä¹ˆåœºæ™¯
"""
```

### é”™è¯¯å¤„ç†

```python
import requests
from requests.exceptions import RequestException

def analyze_image_with_retry(image_url, prompt, max_retries=3):
    """å¸¦é‡è¯•æœºåˆ¶çš„å›¾åƒåˆ†æå‡½æ•°"""
    for attempt in range(max_retries):
        try:
            response = requests.post(
                "https://api.apiyi.com/v1/chat/completions",
                headers={
                    "Authorization": f"Bearer {API_KEY}",
                    "Content-Type": "application/json"
                },
                json={
                    "model": "gpt-4o",
                    "messages": [{
                        "role": "user",
                        "content": [
                            {"type": "text", "text": prompt},
                            {"type": "image_url", "image_url": {"url": image_url}}
                        ]
                    }]
                },
                timeout=30
            )
            
            if response.status_code == 200:
                return response.json()
            elif response.status_code == 429:
                print(f"é€Ÿç‡é™åˆ¶ï¼Œç­‰å¾…åé‡è¯•... (å°è¯• {attempt + 1}/{max_retries})")
                time.sleep(2 ** attempt)  # æŒ‡æ•°é€€é¿
            else:
                print(f"é”™è¯¯: {response.status_code} - {response.text}")
                
        except RequestException as e:
            print(f"è¯·æ±‚å¼‚å¸¸: {e}")
            
    return None
```

## ğŸ”§ é«˜çº§åŠŸèƒ½

### 1. æµå¼è¾“å‡º

å¯¹äºé•¿ç¯‡åˆ†æï¼Œå¯ä»¥ä½¿ç”¨æµå¼è¾“å‡ºè·å¾—æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼š

```python
payload = {
    "model": "gpt-4o",
    "messages": [...],
    "stream": True
}

response = requests.post(url, headers=headers, json=payload, stream=True)
for line in response.iter_lines():
    if line:
        print(line.decode('utf-8'))
```

### 2. å¤šè½®å¯¹è¯

ä¿æŒä¸Šä¸‹æ–‡è¿›è¡Œæ·±å…¥åˆ†æï¼š

```python
messages = [
    {
        "role": "user",
        "content": [
            {"type": "text", "text": "è¿™æ˜¯ä»€ä¹ˆåŠ¨ç‰©ï¼Ÿ"},
            {"type": "image_url", "image_url": {"url": "animal.jpg"}}
        ]
    },
    {
        "role": "assistant",
        "content": "è¿™æ˜¯ä¸€åªé‡‘æ¯›å¯»å›çŠ¬ã€‚"
    },
    {
        "role": "user",
        "content": [{"type": "text", "text": "å®ƒçœ‹èµ·æ¥å¤šå¤§äº†ï¼Ÿå¥åº·çŠ¶å†µå¦‚ä½•ï¼Ÿ"}]
    }
]
```

### 3. ç»“åˆå‡½æ•°è°ƒç”¨

```python
tools = [
    {
        "type": "function",
        "function": {
            "name": "save_image_analysis",
            "description": "ä¿å­˜å›¾åƒåˆ†æç»“æœåˆ°æ•°æ®åº“",
            "parameters": {
                "type": "object",
                "properties": {
                    "objects": {"type": "array", "items": {"type": "string"}},
                    "scene": {"type": "string"},
                    "text_content": {"type": "string"}
                }
            }
        }
    }
]

payload = {
    "model": "gpt-4o",
    "messages": messages,
    "tools": tools,
    "tool_choice": "auto"
}
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æ¨¡å‹ | å“åº”é€Ÿåº¦ | è¯†åˆ«å‡†ç¡®åº¦ | ä¸­æ–‡æ”¯æŒ | ä»·æ ¼ |
|------|---------|-----------|---------|------|
| GPT-4o | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | $$ |
| Gemini 2.5 Pro | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­ | $$ |
| Gemini 2.5 Flash | â­â­â­â­â­ | â­â­â­â­ | â­â­â­â­ | $ |
| GPT-4.1 Mini | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ | $ |

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **éšç§ä¿æŠ¤**ï¼šä¸è¦ä¸Šä¼ åŒ…å«æ•æ„Ÿä¿¡æ¯çš„å›¾ç‰‡
2. **åˆè§„ä½¿ç”¨**ï¼šéµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ï¼Œä¸ç”¨äºéæ³•ç”¨é€”
3. **ç»“æœéªŒè¯**ï¼šAI åˆ†æç»“æœä»…ä¾›å‚è€ƒï¼Œé‡è¦å†³ç­–éœ€äººå·¥å¤æ ¸
4. **æˆæœ¬æ§åˆ¶**ï¼šåˆç†é€‰æ‹©æ¨¡å‹ï¼Œé¿å…ä¸å¿…è¦çš„å¼€é”€

## ğŸ”— ç›¸å…³èµ„æº

- [å®Œæ•´ä»£ç ç¤ºä¾‹](https://github.com/apiyi-api/ai-api-code-samples/tree/main/Vision-API-OpenAI)
- [API å®šä»·è¯´æ˜](https://api.apiyi.com/account/pricing)

<Note>
ğŸ’¡ **å°è´´å£«**ï¼šå»ºè®®å…ˆä½¿ç”¨ GPT-4.1 Mini æˆ– Gemini 2.5 Flash è¿›è¡Œæµ‹è¯•ï¼Œç¡®è®¤æ•ˆæœåå†ä½¿ç”¨é«˜çº§æ¨¡å‹è¿›è¡Œç”Ÿäº§éƒ¨ç½²ã€‚
</Note>