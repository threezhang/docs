---
title: Gemini å›¾åƒç¼–è¾‘ï¼ˆNano Banana ç³»åˆ—ï¼‰
sidebarTitle: Gemini å›¾åƒç¼–è¾‘
description: Google å›¾åƒç¼–è¾‘æ¨¡å‹ï¼ŒåŒ…æ‹¬æœ€æ–° Nano Banana 2ï¼ˆGemini 3 Pro Imageï¼‰å’Œç¨³å®šç‰ˆ Nano Bananaï¼ˆGemini 2.5 Flash Imageï¼‰
icon: "paintbrush"
---

<Note>
**ğŸš€ Nano Banana 2 ç°å·²ä¸Šçº¿ï¼**
Google æœ€æ–°ä¸€ä»£å›¾åƒæ¨¡å‹ **Nano Banana 2**ï¼ˆå†…éƒ¨ä»£å·ï¼‰æ­£å¼å‘å¸ƒï¼

- ğŸ†• **æ¨¡å‹åç§°**ï¼š`gemini-3-pro-image-preview`
- ğŸ§  **åŸºäº Gemini 3**ï¼šæ›´å¼ºçš„æ¨ç†èƒ½åŠ›å’Œå›¾åƒè´¨é‡
- ğŸ”„ **æ— ç¼åˆ‡æ¢**ï¼šä¸æ—§ç‰ˆæœ¬è°ƒç”¨æ–¹å¼å®Œå…¨ç›¸åŒï¼Œåªéœ€æ›´æ¢æ¨¡å‹åç§°
- âœ… **æ—§ç‰ˆç»§ç»­æœåŠ¡**ï¼š`gemini-2.5-flash-image` ç»§ç»­ç¨³å®šæœåŠ¡
- ğŸ“ **é«˜åˆ†è¾¨ç‡æ”¯æŒ**ï¼šæ”¯æŒ 1Kã€2Kã€4K åˆ†è¾¨ç‡ï¼ˆä»… Nano Banana 2ï¼‰
- ğŸ’° **ä»·æ ¼**ï¼šNano Banana \$0.025/æ¬¡ï¼ˆä¾¿å®œ 37.5%ï¼‰ï¼ŒNano Banana 2 \$0.05/æ¬¡ï¼ˆä¾¿å®œ 79%ï¼Œå®˜ç½‘ \$0.24ï¼‰
</Note>

## æ¨¡å‹æ¦‚è§ˆ

Google çš„ **Nano Banana** ç³»åˆ—æ˜¯å…¶å›¾åƒç”ŸæˆæŠ€æœ¯çš„å†…éƒ¨ä»£å·ï¼Œç›®å‰æä¾›ä¸¤ä»£äº§å“ï¼š

### ğŸ†• Nano Banana 2ï¼ˆæœ€æ–°ï¼‰
- **æ¨¡å‹åç§°**ï¼š`gemini-3-pro-image-preview`
- **ç‰ˆæœ¬**ï¼šPreview
- **æŠ€æœ¯**ï¼šåŸºäº Gemini 3 æ¶æ„ï¼Œæ¨ç†èƒ½åŠ›æ›´å¼º
- **ç‰¹ç‚¹**ï¼šæœ€æ–°æŠ€æœ¯ï¼Œå›¾åƒè´¨é‡å’Œç»†èŠ‚æ›´ä¼˜
- **åˆ†è¾¨ç‡**ï¼šæ”¯æŒ 1Kã€2Kã€4K åˆ†è¾¨ç‡
- **ä»·æ ¼**ï¼š\$0.05/æ¬¡ï¼ˆæ¯”å®˜ç½‘ \$0.24 ä¾¿å®œ 79%ï¼‰
- **é€‚ç”¨åœºæ™¯**ï¼šè¿½æ±‚æœ€ä½³è´¨é‡ã€éœ€è¦é«˜åˆ†è¾¨ç‡ã€æ„¿æ„å°è¯•æ–°åŠŸèƒ½

### ğŸ›¡ï¸ Nano Bananaï¼ˆç¨³å®šç‰ˆï¼‰
- **æ¨¡å‹åç§°**ï¼š`gemini-2.5-flash-image`
- **ç‰ˆæœ¬**ï¼šStable
- **æŠ€æœ¯**ï¼šåŸºäº Gemini 2.5 æ¶æ„
- **ç‰¹ç‚¹**ï¼šç¨³å®šå¯é ï¼Œæ¨èç”Ÿäº§ç¯å¢ƒä½¿ç”¨
- **åˆ†è¾¨ç‡**ï¼šå›ºå®š 1Kï¼ˆ1024pxï¼‰ï¼Œä¸æ”¯æŒ imageSize å‚æ•°
- **ä»·æ ¼**ï¼š\$0.025/æ¬¡ï¼ˆæ¯”å®˜ç½‘ \$0.04 ä¾¿å®œ 37.5%ï¼‰
- **é€‚ç”¨åœºæ™¯**ï¼šç”Ÿäº§ç¯å¢ƒã€è¿½æ±‚ç¨³å®šæ€§

<Tip>
ğŸ’¡ **åç§°å¯¹åº”å…³ç³»**
- **Nano Banana** = `gemini-2.5-flash-image`ï¼ˆç¨³å®šç‰ˆï¼‰
- **Nano Banana 2** = `gemini-3-pro-image-preview`ï¼ˆæœ€æ–°ç‰ˆï¼‰

ä¸¤ä»£æ¨¡å‹ä½¿ç”¨å®Œå…¨ç›¸åŒçš„è°ƒç”¨æ–¹å¼ï¼Œåªéœ€ä¿®æ”¹ `model` å‚æ•°å³å¯åˆ‡æ¢ï¼
</Tip>

## ğŸŒŸ å…±åŒç‰¹æ€§

ä¸¤ä»£æ¨¡å‹éƒ½æ”¯æŒä»¥ä¸‹æ ¸å¿ƒèƒ½åŠ›ï¼š

<Note>
**ğŸ¨ æ ¸å¿ƒåŠŸèƒ½**
- âœ… æ”¯æŒ OpenAI å…¼å®¹æ ¼å¼å’Œ Google åŸç”Ÿæ ¼å¼
- ğŸ­ æ”¯æŒå•å›¾/å¤šå›¾æ™ºèƒ½ç¼–è¾‘
- ğŸ“ æ”¯æŒè‡ªå®šä¹‰çºµæ¨ªæ¯”ï¼ˆ16:9ã€9:16 ç­‰ 10 ç§æ¯”ä¾‹ï¼‰
- ğŸ–¼ï¸ **Nano Banana 2 ç‹¬äº«**ï¼šæ”¯æŒ 1Kã€2Kã€4K åˆ†è¾¨ç‡
- âš¡ å¹³å‡ 10 ç§’å®Œæˆç¼–è¾‘
- ğŸ’° è¶…å€¼ä»·æ ¼ï¼šNano Banana \$0.025/æ¬¡ï¼ˆä¾¿å®œ 37.5%ï¼‰ï¼ŒNano Banana 2 \$0.05/æ¬¡ï¼ˆä¾¿å®œ 79%ï¼‰
</Note>

## ğŸ”€ ä¸¤ç§è°ƒç”¨æ–¹å¼

| ç‰¹æ€§ | OpenAI å…¼å®¹æ¨¡å¼ | Google åŸç”Ÿæ ¼å¼ |
|------|----------------|----------------|
| **ç«¯ç‚¹** | `/v1/chat/completions` | `/v1beta/models/gemini-2.5-flash-image:generateContent` |
| **è¾“å‡ºå°ºå¯¸** | é»˜è®¤æ¯”ä¾‹ | æ”¯æŒ 10 ç§çºµæ¨ªæ¯” |
| **åˆ†è¾¨ç‡** | å›ºå®š 1K | Nano Banana 2 æ”¯æŒ 1K/2K/4Kï¼ŒNano Banana å›ºå®š 1K |
| **å¤šå›¾æ”¯æŒ** | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| **å…¼å®¹æ€§** | å®Œç¾å…¼å®¹ OpenAI SDK | éœ€è¦åŸç”Ÿè°ƒç”¨ |
| **è¿”å›æ ¼å¼** | Base64 | Base64 |
| **å›¾ç‰‡è¾“å…¥** | URL æˆ– Base64 | Base64ï¼ˆinline_dataï¼‰ |

<Tip>
ğŸ’¡ **å¦‚ä½•é€‰æ‹©ï¼Ÿ**
- å¦‚æœåªéœ€è¦é»˜è®¤æ¯”ä¾‹çš„å›¾ç‰‡ï¼Œä½¿ç”¨ **OpenAI å…¼å®¹æ¨¡å¼**ï¼Œç®€å•å¿«æ·
- å¦‚æœéœ€è¦è‡ªå®šä¹‰çºµæ¨ªæ¯”ï¼ˆå¦‚ 16:9ã€9:16ï¼‰æˆ–é«˜åˆ†è¾¨ç‡ï¼ˆ2K/4Kï¼‰ï¼Œä½¿ç”¨ **Google åŸç”Ÿæ ¼å¼**
</Tip>

## ğŸ“‹ Nano Banana ç³»åˆ—å¯¹æ¯”

### ç³»åˆ—æ¨¡å‹å¯¹æ¯”

| æ¨¡å‹ | ä»£å· | æ¨¡å‹ ID | ç‰ˆæœ¬ | æŠ€æœ¯åŸºç¡€ | åˆ†è¾¨ç‡ | ä»·æ ¼ | æ¨èåœºæ™¯ |
|------|------|---------|------|----------|--------|------|----------|
| **Nano Banana 2** | ğŸ†• æœ€æ–° | `gemini-3-pro-image-preview` | Preview | Gemini 3 | 1K/2K/4K | \$0.05/æ¬¡ | è¿½æ±‚æœ€ä½³è´¨é‡ã€éœ€è¦é«˜åˆ†è¾¨ç‡ |
| **Nano Banana** | ğŸ›¡ï¸ ç¨³å®š | `gemini-2.5-flash-image` | Stable | Gemini 2.5 | 1Kï¼ˆå›ºå®šï¼‰ | \$0.025/æ¬¡ | ç”Ÿäº§ç¯å¢ƒ |

**å…±åŒç‰¹ç‚¹**ï¼šé€Ÿåº¦ç›¸åŒï¼ˆ~10ç§’ï¼‰ã€è°ƒç”¨æ–¹å¼ç›¸åŒ

### ä¸å…¶ä»–æ¨¡å‹å¯¹æ¯”

| æ¨¡å‹ | æ¨¡å‹ ID | è®¡è´¹æ–¹å¼ | è€å¼ ä»·æ ¼ | å®˜ç½‘ä»·æ ¼ | èŠ‚çœ | åˆ†è¾¨ç‡ | é€Ÿåº¦ |
|------|---------|---------|---------|---------|------|--------|------|
| **Nano Banana 2** | `gemini-3-pro-image-preview` | æŒ‰æ¬¡ | \$0.05/æ¬¡ | \$0.24/æ¬¡ | 79% | 1K/2K/4K | ~10ç§’ |
| **Nano Banana** | `gemini-2.5-flash-image` | æŒ‰æ¬¡ | \$0.025/æ¬¡ | \$0.04/æ¬¡ | 37.5% | 1Kï¼ˆå›ºå®šï¼‰ | ~10ç§’ |
| **GPT-4o ç¼–è¾‘** | `gpt-4o` | Token | - | - | - | - | ~20ç§’ |
| **DALLÂ·E 2 ç¼–è¾‘** | `dall-e-2` | æŒ‰æ¬¡ | - | \$0.018/å¼  | - | å›ºå®š | è¾ƒæ…¢ |

<Tip>
ğŸ’° **ä»·æ ¼ä¼˜åŠ¿**  
- **Nano Banana 2**ï¼š\$0.05/æ¬¡ï¼ˆè€å¼ APIï¼‰vs \$0.24/æ¬¡ï¼ˆå®˜ç½‘ï¼‰ï¼Œä¾¿å®œ 79%
- **Nano Banana**ï¼š\$0.025/æ¬¡ï¼ˆè€å¼ APIï¼‰vs \$0.04/æ¬¡ï¼ˆå®˜ç½‘ï¼‰ï¼Œä¾¿å®œ 37.5%
- **å……å€¼ç¦åˆ©**ï¼šå……å€¼ 100 ç¾é‡‘ +10% èµ é€
- **æ±‡ç‡ä¼˜åŠ¿**ï¼šäººæ°‘å¸æ”¯ä»˜æ›´åˆ’ç®—

**Nano Banana 2 åœ¨è€å¼  API æ€§ä»·æ¯”è¶…é«˜ï¼**
</Tip>

## æ–¹å¼ä¸€ï¼šOpenAI å…¼å®¹æ¨¡å¼

<Tip>
**ğŸ”„ æ¨¡å‹åˆ‡æ¢è¯´æ˜**
- ä½¿ç”¨ **Nano Banana 2**ï¼ˆæœ€æ–°ï¼‰ï¼š`"model": "gemini-3-pro-image-preview"`
- ä½¿ç”¨ **Nano Banana**ï¼ˆç¨³å®šï¼‰ï¼š`"model": "gemini-2.5-flash-image"`

ä¸¤ä¸ªæ¨¡å‹ä½¿ç”¨å®Œå…¨ç›¸åŒçš„è°ƒç”¨æ–¹å¼ï¼Œåªéœ€ä¿®æ”¹ `model` å­—æ®µå³å¯ï¼
</Tip>

### å•å›¾ç¼–è¾‘ - Curl

```bash
curl -X POST "https://api.laozhang.ai/v1/chat/completions" \
     -H "Authorization: Bearer sk-YOUR_API_KEY" \
     -H "Content-Type: application/json" \
     -d '{
    "model": "gemini-3-pro-image-preview",
    "stream": false,
    "messages": [
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "add a cute dog to this image"
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": "https://example.com/your-image.jpg"
                    }
                }
            ]
        }
    ]
}'
```

### å•å›¾ç¼–è¾‘ - Python SDK

```python
from openai import OpenAI
import base64
import re

client = OpenAI(
    api_key="sk-YOUR_API_KEY",
    base_url="https://api.laozhang.ai/v1"
)

response = client.chat.completions.create(
    model="gemini-3-pro-image-preview",  # æœ€æ–°ç‰ˆï¼Œæˆ–ä½¿ç”¨ gemini-2.5-flash-imageï¼ˆç¨³å®šç‰ˆï¼‰
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "add a cute dog to this image"
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": "https://example.com/your-image.jpg"
                    }
                }
            ]
        }
    ]
)

# æå–å¹¶ä¿å­˜å›¾ç‰‡
content = response.choices[0].message.content
match = re.search(r'!\[.*?\]\((data:image/png;base64,.*?)\)', content)

if match:
    base64_data = match.group(1).split(',')[1]
    image_data = base64.b64decode(base64_data)
    
    with open('edited.png', 'wb') as f:
        f.write(image_data)
    print("âœ… ç¼–è¾‘åçš„å›¾ç‰‡å·²ä¿å­˜: edited.png")
```

### å¤šå›¾åˆæˆ - Python SDK

```python
from openai import OpenAI
import base64
import re

client = OpenAI(
    api_key="sk-YOUR_API_KEY",
    base_url="https://api.laozhang.ai/v1"
)

response = client.chat.completions.create(
    model="gemini-3-pro-image-preview",  # æœ€æ–°ç‰ˆï¼Œæˆ–ä½¿ç”¨ gemini-2.5-flash-imageï¼ˆç¨³å®šç‰ˆï¼‰
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "merge these two images into one artistic composition"
                },
                {
                    "type": "image_url",
                    "image_url": {"url": "https://example.com/image1.jpg"}
                },
                {
                    "type": "image_url",
                    "image_url": {"url": "https://example.com/image2.jpg"}
                }
            ]
        }
    ]
)

# æå–å¹¶ä¿å­˜å›¾ç‰‡
content = response.choices[0].message.content
match = re.search(r'!\[.*?\]\((data:image/png;base64,.*?)\)', content)

if match:
    base64_data = match.group(1).split(',')[1]
    image_data = base64.b64decode(base64_data)
    
    with open('merged.png', 'wb') as f:
        f.write(image_data)
    print("âœ… åˆæˆå›¾ç‰‡å·²ä¿å­˜: merged.png")
```

## æ–¹å¼äºŒï¼šGoogle åŸç”Ÿæ ¼å¼ï¼ˆæ”¯æŒè‡ªå®šä¹‰çºµæ¨ªæ¯” + é«˜åˆ†è¾¨ç‡ï¼‰

<Tip>
**ğŸ”„ åŸç”Ÿæ ¼å¼æ¨¡å‹åˆ‡æ¢**
åœ¨ Google åŸç”Ÿæ ¼å¼ä¸­ï¼Œæ¨¡å‹åç§°åœ¨ URL è·¯å¾„ä¸­æŒ‡å®šï¼š
- **Nano Banana 2**ï¼ˆæœ€æ–°ï¼‰ï¼š`/v1beta/models/gemini-3-pro-image-preview:generateContent`
- **Nano Banana**ï¼ˆç¨³å®šï¼‰ï¼š`/v1beta/models/gemini-2.5-flash-image:generateContent`
</Tip>

### æ”¯æŒçš„åˆ†è¾¨ç‡

<Tip>
ğŸ’¡ **åˆ†è¾¨ç‡æ”¯æŒè¯´æ˜**
- **Nano Banana 2**ï¼ˆ`gemini-3-pro-image-preview`ï¼‰ï¼šæ”¯æŒ 1Kã€2Kã€4K ä¸‰ç§åˆ†è¾¨ç‡
- **Nano Banana**ï¼ˆ`gemini-2.5-flash-image`ï¼‰ï¼šå›ºå®š 1Kï¼ˆ1024pxï¼‰ï¼Œä¸æ”¯æŒ `imageSize` å‚æ•°
</Tip>

### Python ä»£ç ç¤ºä¾‹

<Note>
ğŸ’¡ **ä¸‰ä¸ªç¤ºä¾‹é€’è¿›å…³ç³»**  
ç¤ºä¾‹1ç¼–è¾‘å›¾ç‰‡ â†’ ç¤ºä¾‹2ç”¨å®ƒå˜æ¢é£æ ¼ â†’ ç¤ºä¾‹3èåˆå‰ä¸¤å¼ å›¾ã€‚é€»è¾‘æ¸…æ™°ï¼
</Note>

<Accordion title="ç¤ºä¾‹ 1ï¼šå•å›¾ç¼–è¾‘ â†’ æ·»åŠ å…ƒç´ ç”Ÿæˆç¬¬ä¸€å¼ å›¾">

```python
import requests
import base64

# ========== é…ç½® ==========
API_KEY = "sk-YOUR_API_KEY"

# Nano Banana 2 (æ”¯æŒ 2K/4K)
API_URL = "https://api.laozhang.ai/v1beta/models/gemini-3-pro-image-preview:generateContent"
INPUT_IMAGE = "cat.jpg"  # å‡†å¤‡ä¸€å¼ çŒ«çš„å›¾ç‰‡
PROMPT = "add a cute wizard hat on this cat's head"
ASPECT_RATIO = "1:1"
IMAGE_SIZE = "2K"  # Nano Banana 2: 1K, 2K, 4K
# ============================

# è¯»å–å¹¶ç¼–ç å›¾ç‰‡
with open(INPUT_IMAGE, "rb") as f:
    image_b64 = base64.b64encode(f.read()).decode("utf-8")

headers = {"Authorization": f"Bearer {API_KEY}", "Content-Type": "application/json"}

payload = {
    "contents": [{
        "parts": [
            {"text": PROMPT},
            {"inline_data": {"mime_type": "image/jpeg", "data": image_b64}}
        ]
    }],
    "generationConfig": {
        "responseModalities": ["IMAGE"],
        "imageConfig": {
            "aspectRatio": ASPECT_RATIO,
            "imageSize": IMAGE_SIZE
        }
    }
}

response = requests.post(API_URL, headers=headers, json=payload, timeout=180)
result = response.json()

# ä¿å­˜å›¾ç‰‡
output_data = result["candidates"][0]["content"]["parts"][0]["inlineData"]["data"]
with open("output.png", "wb") as f:
    f.write(base64.b64decode(output_data))

print("âœ… å›¾ç‰‡å·²ä¿å­˜: output.png")
```

</Accordion>

<Accordion title="ç¤ºä¾‹ 2ï¼šé£æ ¼è½¬æ¢ â†’ ç”¨ç¬¬ä¸€å¼ å›¾ç”Ÿæˆç¬¬äºŒå¼ å›¾">

```python
import requests
import base64

# ========== é…ç½® ==========
API_KEY = "sk-YOUR_API_KEY"
API_URL = "https://api.laozhang.ai/v1beta/models/gemini-3-pro-image-preview:generateContent"

INPUT_IMAGE = "output.png"  # ä½¿ç”¨ç¤ºä¾‹1ç”Ÿæˆçš„å›¾ç‰‡
PROMPT = "Transform this cat into Van Gogh Starry Night style oil painting"
ASPECT_RATIO = "1:1"
IMAGE_SIZE = "2K"  # Nano Banana 2: 1K, 2K, 4K
# ============================

# è¯»å–å¹¶ç¼–ç å›¾ç‰‡
with open(INPUT_IMAGE, "rb") as f:
    image_b64 = base64.b64encode(f.read()).decode("utf-8")

headers = {"Authorization": f"Bearer {API_KEY}", "Content-Type": "application/json"}

payload = {
    "contents": [{
        "parts": [
            {"text": PROMPT},
            {"inline_data": {"mime_type": "image/png", "data": image_b64}}
        ]
    }],
    "generationConfig": {
        "responseModalities": ["IMAGE"],
        "imageConfig": {
            "aspectRatio": ASPECT_RATIO,
            "imageSize": IMAGE_SIZE
        }
    }
}

response = requests.post(API_URL, headers=headers, json=payload, timeout=180)
result = response.json()

# ä¿å­˜å›¾ç‰‡
output_data = result["candidates"][0]["content"]["parts"][0]["inlineData"]["data"]
with open("output_styled.png", "wb") as f:
    f.write(base64.b64decode(output_data))

print("âœ… å›¾ç‰‡å·²ä¿å­˜: output_styled.png")
```

</Accordion>

<Accordion title="ç¤ºä¾‹ 3ï¼šå¤šå›¾èåˆ â†’ ç”¨ç¬¬ä¸€å¼ å’Œç¬¬äºŒå¼ ç”Ÿæˆç¬¬ä¸‰å¼ å›¾">

```python
import requests
import base64

# ========== é…ç½® ==========
API_KEY = "sk-YOUR_API_KEY"
API_URL = "https://api.laozhang.ai/v1beta/models/gemini-3-pro-image-preview:generateContent"

# ä½¿ç”¨å‰é¢ç”Ÿæˆçš„ä¸¤å¼ å›¾ï¼ˆç¤ºä¾‹1å’Œç¤ºä¾‹2çš„è¾“å‡ºï¼‰
IMAGES = ["output.png", "output_styled.png"]
PROMPT = "Combine these two cat images into a single artistic composition"
ASPECT_RATIO = "16:9"
IMAGE_SIZE = "2K"  # Nano Banana 2: 1K, 2K, 4K
# ============================

# æ„å»º parts: æ–‡æœ¬ + å¤šå¼ å›¾ç‰‡
parts = [{"text": PROMPT}]

for img_path in IMAGES:
    with open(img_path, "rb") as f:
        img_b64 = base64.b64encode(f.read()).decode("utf-8")
    parts.append({"inline_data": {"mime_type": "image/png", "data": img_b64}})

headers = {"Authorization": f"Bearer {API_KEY}", "Content-Type": "application/json"}

payload = {
    "contents": [{"parts": parts}],
    "generationConfig": {
        "responseModalities": ["IMAGE"],
        "imageConfig": {
            "aspectRatio": ASPECT_RATIO,
            "imageSize": IMAGE_SIZE
        }
    }
}

response = requests.post(API_URL, headers=headers, json=payload, timeout=180)
result = response.json()

# ä¿å­˜å›¾ç‰‡
output_data = result["candidates"][0]["content"]["parts"][0]["inlineData"]["data"]
with open("output_mixed.png", "wb") as f:
    f.write(base64.b64decode(output_data))

print("âœ… å›¾ç‰‡å·²ä¿å­˜: output_mixed.png")
```

</Accordion>

### Python å®Œæ•´å·¥å…·è„šæœ¬

<Accordion title="å±•å¼€æŸ¥çœ‹å®Œæ•´ Python è„šæœ¬ï¼ˆæ”¯æŒçºµæ¨ªæ¯”é…ç½®ï¼‰">

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
Gemini å›¾ç‰‡ç¼–è¾‘å·¥å…· - Pythonç‰ˆæœ¬
ä¸Šä¼ æœ¬åœ°å›¾ç‰‡ + æ–‡å­—æè¿°ï¼Œç”Ÿæˆæ–°å›¾ç‰‡ï¼Œæ”¯æŒè‡ªå®šä¹‰çºµæ¨ªæ¯”
"""

import requests
import base64
import os
import datetime
import mimetypes
from typing import Optional, Tuple

class GeminiImageEditor:
    """Gemini å›¾ç‰‡ç¼–è¾‘å™¨"""

    # æ”¯æŒçš„çºµæ¨ªæ¯”
    SUPPORTED_ASPECT_RATIOS = [
        "21:9", "16:9", "4:3", "3:2", "1:1",
        "9:16", "3:4", "2:3", "5:4", "4:5"
    ]

    def __init__(self, api_key: str,
                 api_url: str = "https://api.laozhang.ai/v1beta/models/gemini-3-pro-image-preview:generateContent"):
        """
        åˆå§‹åŒ–å›¾ç‰‡ç¼–è¾‘å™¨

        å‚æ•°:
            api_key: APIå¯†é’¥
            api_url: APIåœ°å€ï¼ˆä½¿ç”¨ Google åŸç”Ÿ Gemini APIï¼‰
        """
        self.api_key = api_key
        self.api_url = api_url
        self.headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {api_key}"
        }

    def edit_image(self, image_path: str, prompt: str,
                   aspect_ratio: Optional[str] = "1:1",
                   output_dir: str = ".") -> Tuple[bool, str]:
        """
        ç¼–è¾‘å›¾ç‰‡å¹¶ç”Ÿæˆæ–°å›¾ç‰‡

        å‚æ•°:
            image_path: è¾“å…¥å›¾ç‰‡è·¯å¾„
            prompt: ç¼–è¾‘æè¿°ï¼ˆæç¤ºè¯ï¼‰
            aspect_ratio: çºµæ¨ªæ¯”ï¼Œå¦‚ "16:9", "1:1" ç­‰ï¼ˆé»˜è®¤ 1:1ï¼‰
            output_dir: ä¿å­˜ç›®å½•ï¼ˆé»˜è®¤å½“å‰ç›®å½•ï¼‰

        è¿”å›:
            (æ˜¯å¦æˆåŠŸ, ç»“æœæ¶ˆæ¯)
        """
        print(f"ğŸš€ å¼€å§‹ç¼–è¾‘å›¾ç‰‡...")
        print(f"ğŸ“ è¾“å…¥å›¾ç‰‡: {image_path}")
        print(f"ğŸ“ ç¼–è¾‘æè¿°: {prompt}")
        print(f"ğŸ“ çºµæ¨ªæ¯”: {aspect_ratio}")

        # æ£€æŸ¥å›¾ç‰‡æ–‡ä»¶æ˜¯å¦å­˜åœ¨
        if not os.path.exists(image_path):
            return False, f"å›¾ç‰‡æ–‡ä»¶ä¸å­˜åœ¨: {image_path}"

        # éªŒè¯çºµæ¨ªæ¯”
        if aspect_ratio and aspect_ratio not in self.SUPPORTED_ASPECT_RATIOS:
            return False, f"ä¸æ”¯æŒçš„çºµæ¨ªæ¯” {aspect_ratio}ã€‚æ”¯æŒ: {', '.join(self.SUPPORTED_ASPECT_RATIOS)}"

        # è¯»å–å¹¶ç¼–ç å›¾ç‰‡
        try:
            with open(image_path, 'rb') as f:
                image_data = f.read()
            image_base64 = base64.b64encode(image_data).decode('utf-8')

            # æ£€æµ‹å›¾ç‰‡ç±»å‹
            mime_type, _ = mimetypes.guess_type(image_path)
            if not mime_type or not mime_type.startswith('image/'):
                mime_type = 'image/jpeg'  # é»˜è®¤
            print(f"ğŸ¨ å›¾ç‰‡ç±»å‹: {mime_type}")

        except Exception as e:
            return False, f"è¯»å–å›¾ç‰‡å¤±è´¥: {str(e)}"

        # ç”Ÿæˆè¾“å‡ºæ–‡ä»¶å
        timestamp = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
        output_file = os.path.join(output_dir, f"gemini_edited_{timestamp}.png")

        try:
            # æ„å»ºè¯·æ±‚æ•°æ®ï¼ˆGoogle åŸç”Ÿæ ¼å¼ï¼‰
            payload = {
                "contents": [{
                    "parts": [
                        {"text": prompt},
                        {
                            "inline_data": {
                                "mime_type": mime_type,
                                "data": image_base64
                            }
                        }
                    ]
                }]
            }

            # æ·»åŠ çºµæ¨ªæ¯”é…ç½®
            if aspect_ratio:
                payload["generationConfig"] = {
                    "responseModalities": ["IMAGE"],
                    "imageConfig": {
                        "aspectRatio": aspect_ratio
                    }
                }

            print("ğŸ“¡ å‘é€è¯·æ±‚åˆ° Gemini API...")

            # å‘é€è¯·æ±‚
            response = requests.post(
                self.api_url,
                headers=self.headers,
                json=payload,
                timeout=120
            )

            if response.status_code != 200:
                return False, f"API è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç : {response.status_code}"

            # è§£æå“åº”
            result = response.json()

            # æå–å›¾ç‰‡æ•°æ®
            if "candidates" not in result or len(result["candidates"]) == 0:
                return False, "æœªæ‰¾åˆ°å›¾ç‰‡æ•°æ®"

            candidate = result["candidates"][0]
            if "content" not in candidate or "parts" not in candidate["content"]:
                return False, "å“åº”æ ¼å¼é”™è¯¯"

            parts = candidate["content"]["parts"]
            output_image_data = None

            for part in parts:
                if "inlineData" in part and "data" in part["inlineData"]:
                    output_image_data = part["inlineData"]["data"]
                    break

            if not output_image_data:
                return False, "æœªæ‰¾åˆ°å›¾ç‰‡æ•°æ®"

            # è§£ç å¹¶ä¿å­˜å›¾ç‰‡
            print("ğŸ’¾ æ­£åœ¨ä¿å­˜å›¾ç‰‡...")
            decoded_data = base64.b64decode(output_image_data)

            os.makedirs(os.path.dirname(output_file) if os.path.dirname(output_file) else ".", exist_ok=True)

            with open(output_file, 'wb') as f:
                f.write(decoded_data)

            file_size = len(decoded_data) / 1024  # KB
            print(f"âœ… å›¾ç‰‡å·²ä¿å­˜: {output_file}")
            print(f"ğŸ“Š æ–‡ä»¶å¤§å°: {file_size:.2f} KB")

            return True, f"æˆåŠŸä¿å­˜å›¾ç‰‡: {output_file}"

        except requests.exceptions.Timeout:
            return False, "è¯·æ±‚è¶…æ—¶ï¼ˆ120ç§’ï¼‰"
        except requests.exceptions.ConnectionError:
            return False, "ç½‘ç»œè¿æ¥é”™è¯¯"
        except Exception as e:
            return False, f"é”™è¯¯: {str(e)}"

def main():
    """ä¸»å‡½æ•° - ä½¿ç”¨ç¤ºä¾‹"""

    # ========== é…ç½®åŒº ==========
    # 1. è®¾ç½®ä½ çš„ API å¯†é’¥
    API_KEY = "sk-YOUR_API_KEY"

    # 2. è¾“å…¥å›¾ç‰‡è·¯å¾„
    INPUT_IMAGE = "./input.jpg"  # æ›¿æ¢ä¸ºä½ çš„å›¾ç‰‡è·¯å¾„

    # 3. è¾“å…¥ç¼–è¾‘æè¿°ï¼ˆæç¤ºè¯ï¼‰
    PROMPT = "add a cute cat next to the dog, keep the original composition"

    # 4. é€‰æ‹©çºµæ¨ªæ¯”ï¼ˆå¯é€‰ï¼‰
    # æ”¯æŒ: 21:9, 16:9, 4:3, 3:2, 1:1, 9:16, 3:4, 2:3, 5:4, 4:5
    ASPECT_RATIO = "16:9"  # å®½å±
    # ASPECT_RATIO = "1:1"   # æ­£æ–¹å½¢
    # ASPECT_RATIO = "9:16"  # ç«–å±

    # 5. è®¾ç½®ä¿å­˜ç›®å½•ï¼ˆå¯é€‰ï¼‰
    OUTPUT_DIR = "."  # å½“å‰ç›®å½•
    # ============================

    print("="*60)
    print("Gemini å›¾ç‰‡ç¼–è¾‘å·¥å…·")
    print("="*60)
    print(f"â° å¼€å§‹æ—¶é—´: {datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    print("="*60)

    # åˆ›å»ºç¼–è¾‘å™¨å¹¶ç¼–è¾‘å›¾ç‰‡
    editor = GeminiImageEditor(API_KEY)
    success, message = editor.edit_image(
        image_path=INPUT_IMAGE,
        prompt=PROMPT,
        aspect_ratio=ASPECT_RATIO,
        output_dir=OUTPUT_DIR
    )

    # æ˜¾ç¤ºç»“æœ
    print("\n" + "="*60)
    if success:
        print("ğŸ‰ ç¼–è¾‘æˆåŠŸï¼")
        print(f"âœ… {message}")
    else:
        print("âŒ ç¼–è¾‘å¤±è´¥")
        print(f"ğŸ’¥ {message}")
        print("\nå»ºè®®æ£€æŸ¥:")
        print("  1. API å¯†é’¥æ˜¯å¦æ­£ç¡®")
        print("  2. å›¾ç‰‡è·¯å¾„æ˜¯å¦æ­£ç¡®")
        print("  3. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸")
        print("  4. æç¤ºè¯æ˜¯å¦åˆç†")

    print(f"â° ç»“æŸæ—¶é—´: {datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    print("="*60)

if __name__ == "__main__":
    main()
```

</Accordion>

| **Search Grounding** | âŒ æ—  | âœ… æœ‰ |
| **å¤šå›¾æ”¯æŒ** | âœ… æœ‰ï¼ˆæœ€å¤š3å¼ ï¼‰ | âœ… æœ‰ï¼ˆæœ€å¤š14å¼ ï¼‰ |
| **é€Ÿåº¦** | ~10ç§’ | ~10ç§’ |
| **æ¨èåœºæ™¯** | ç”Ÿäº§ç¯å¢ƒï¼Œè¿½æ±‚ç¨³å®šæ€§ | è¿½æ±‚æœ€ä½³è´¨é‡ï¼Œéœ€è¦é«˜åˆ†è¾¨ç‡ |

### Q2: åº”è¯¥é€‰æ‹©å“ªä¸ªæ¨¡å‹ï¼Ÿ

**é€‰æ‹© Nano Banana**ï¼ˆ`gemini-2.5-flash-image`ï¼‰å¦‚æœï¼š
- âœ… éœ€è¦ç”Ÿäº§ç¯å¢ƒç¨³å®šæ€§
- âœ… 1K åˆ†è¾¨ç‡è¶³å¤Ÿä½¿ç”¨
- âœ… å¸Œæœ›æˆæœ¬æœ€ä½ï¼ˆ\$0.025/æ¬¡ï¼‰

**é€‰æ‹© Nano Banana 2**ï¼ˆ`gemini-3-pro-image-preview`ï¼‰å¦‚æœï¼š
- âœ… éœ€è¦é«˜åˆ†è¾¨ç‡ï¼ˆ2K/4Kï¼‰
- âœ… è¿½æ±‚æœ€ä½³å›¾åƒè´¨é‡
- âœ… éœ€è¦é«˜çº§ç‰¹æ€§ï¼ˆThinking Modeã€Search Groundingï¼‰
- âœ… æ„¿æ„ä½¿ç”¨é¢„è§ˆç‰ˆæœ¬

### Q3: å¦‚ä½•åˆ‡æ¢æ¨¡å‹ï¼Ÿ

**éå¸¸ç®€å•ï¼åªéœ€æ›´æ”¹æ¨¡å‹åç§°ï¼š**

**OpenAI å…¼å®¹æ¨¡å¼**ï¼š
```python
# Nano Bananaï¼ˆç¨³å®šç‰ˆï¼‰
model="gemini-2.5-flash-image"

# Nano Banana 2ï¼ˆæœ€æ–°ç‰ˆï¼‰
model="gemini-3-pro-image-preview"
```

**Google åŸç”Ÿæ ¼å¼**ï¼š
```bash
# Nano Bananaï¼ˆç¨³å®šç‰ˆï¼‰
https://api.laozhang.ai/v1beta/models/gemini-2.5-flash-image:generateContent

# Nano Banana 2ï¼ˆæœ€æ–°ç‰ˆï¼‰
https://api.laozhang.ai/v1beta/models/gemini-3-pro-image-preview:generateContent
```

### Q4: å¦‚ä½•ä½¿ç”¨ 4K åˆ†è¾¨ç‡ï¼Ÿ

**4K ä»… Nano Banana 2 æ”¯æŒ**ï¼Œä½¿ç”¨ Google åŸç”Ÿæ ¼å¼å¹¶æ·»åŠ  `imageSize` å‚æ•°ï¼š

```json
{
  "generationConfig": {
    "responseModalities": ["IMAGE"],
    "imageConfig": {
      "aspectRatio": "16:9",
      "imageSize": "4K"  // å¿…é¡»å¤§å†™ "K"
    }
  }
}
```

**é‡è¦**ï¼šå¿…é¡»ä½¿ç”¨å¤§å†™ "K"ï¼ˆ1Kã€2Kã€4Kï¼‰ï¼Œå°å†™ï¼ˆ1kï¼‰ä¼šè¢«æ‹’ç»ã€‚

### Q5: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ

æ”¯æŒå¸¸è§çš„å›¾ç‰‡æ ¼å¼ï¼š
- JPG/JPEG
- PNG
- WebP
- GIFï¼ˆé™æ€ï¼‰

å»ºè®®ä½¿ç”¨ JPG æˆ– PNG æ ¼å¼ä»¥è·å¾—æœ€ä½³æ•ˆæœã€‚

### Q6: å›¾ç‰‡å¤§å°æœ‰é™åˆ¶å—ï¼Ÿ

- **æ¨èå¤§å°**ï¼šå•å¼ å›¾ç‰‡ â‰¤ 5MB
- **æœ€å¤§å¤§å°**ï¼šâ‰¤ 10MB
- è¿‡å¤§çš„å›¾ç‰‡ä¼šå¢åŠ å¤„ç†æ—¶é—´ï¼Œå»ºè®®å‹ç¼©åä¸Šä¼ 

### Q7: å¯ä»¥åŒæ—¶å¤„ç†å¤šå°‘å¼ å›¾ç‰‡ï¼Ÿ

- **Nano Banana**ï¼šæ”¯æŒå¤šå¼ å›¾ç‰‡ï¼ˆå»ºè®® â‰¤ 3 å¼ ï¼‰
- **Nano Banana 2**ï¼šæ”¯æŒå¤šå¼ å›¾ç‰‡ï¼ˆæœ€å¤š 14 å¼ ï¼Œå»ºè®® â‰¤ 4 å¼ ï¼‰
- å›¾ç‰‡è¿‡å¤šä¼šå½±å“ç”Ÿæˆè´¨é‡å’Œå¤„ç†æ—¶é—´

### Q8: ä¸ºä»€ä¹ˆ Nano Banana 2 åœ¨è€å¼  API è¿™ä¹ˆä¾¿å®œï¼Ÿ

| æ¨¡å‹ | è€å¼  API | å®˜ç½‘ | èŠ‚çœ |
|------|---------|------|------|
| **Nano Banana 2** | \$0.05/æ¬¡ | \$0.24/æ¬¡ | **79%** |
| **Nano Banana** | \$0.025/æ¬¡ | \$0.04/æ¬¡ | 37.5% |

**Nano Banana 2 åœ¨è€å¼  API æ€§ä»·æ¯”è¶…é«˜ï¼** æ¯”å®˜ç½‘ä¾¿å®œ 79%ï¼Œè¿˜æœ‰å……å€¼èµ é€å’Œæ±‡ç‡ä¼˜åŠ¿ã€‚

## ğŸ“ æ›´æ–°æ—¥å¿—

### 2025-01-XX
- ğŸ†• æ·»åŠ  Nano Banana 2ï¼ˆ`gemini-3-pro-image-preview`ï¼‰æ”¯æŒ
- ğŸ¨ æ·»åŠ  4K åˆ†è¾¨ç‡æ”¯æŒï¼ˆä»… Nano Banana 2ï¼‰
- ğŸ§  æ·»åŠ  Thinking Modeï¼ˆå†…ç½®æ¨ç†ï¼Œé»˜è®¤å¯ç”¨ï¼‰
- ğŸŒ æ·»åŠ  Google Search Grounding æ”¯æŒ
- ğŸ–¼ï¸ æ‰©å±•å¤šå›¾æ”¯æŒè‡³ 14 å¼ ï¼ˆNano Banana 2ï¼‰
- ğŸ’° æ›´æ–°ä»·æ ¼ï¼šNano Banana 2 \$0.05/æ¬¡ï¼ˆæ¯”å®˜ç½‘ \$0.24 ä¾¿å®œ 79%ï¼‰
- ğŸ“Š æ·»åŠ å®Œæ•´åˆ†è¾¨ç‡è¡¨æ ¼
- ğŸ”§ æ›´æ–°æ¨¡å‹å¯¹æ¯”å’Œåˆ‡æ¢è¯´æ˜

### 2024-12-XX
- ğŸ‰ åˆå§‹å‘å¸ƒ Nano Bananaï¼ˆ`gemini-2.5-flash-image`ï¼‰
- ğŸ¨ æ”¯æŒ 10 ç§çºµæ¨ªæ¯”
- ğŸ’° ä»·æ ¼ï¼š\$0.025/æ¬¡ï¼ˆæ¯”å®˜ç½‘ä¾¿å®œ 37.5%ï¼‰

---

<Tip>
ğŸ’¡ **éœ€è¦å¸®åŠ©ï¼Ÿ**  
- ğŸ“– [æŸ¥çœ‹å›¾åƒç”Ÿæˆæ–‡æ¡£](/api-capabilities/gemini-flash-image)
- ğŸ’¬ åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè·å–æ”¯æŒ
- ğŸ”‘ [è·å–ä½ çš„ API å¯†é’¥](https://api.laozhang.ai/token)
</Tip>

## ğŸ”— ç›¸å…³èµ„æº

<CardGroup cols={2}>
  <Card title="å›¾åƒç”Ÿæˆ" icon="sparkles" href="/api-capabilities/gemini-flash-image">
    å­¦ä¹ å¦‚ä½•ä»æ–‡å­—ç”Ÿæˆå…¨æ–°å›¾ç‰‡
  </Card>
  <Card title="API å‚è€ƒ" icon="code" href="/api-reference/chat-completions">
    æŸ¥çœ‹å®Œæ•´çš„ API æ¥å£æ–‡æ¡£
  </Card>
  <Card title="ä»¤ç‰Œç®¡ç†" icon="key" href="https://api.laozhang.ai/token">
    åˆ›å»ºå’Œç®¡ç†ä½ çš„ API ä»¤ç‰Œ
  </Card>
  <Card title="ä»·æ ¼è¯´æ˜" icon="dollar-sign" href="/pricing">
    æŸ¥çœ‹è¯¦ç»†çš„ä»·æ ¼è¡¨å’Œè®¡è´¹è¯´æ˜
  </Card>
</CardGroup>

