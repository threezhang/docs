---
title: "API å‚è€ƒ"
description: "Sora 2 è§†é¢‘ç”Ÿæˆ API å®Œæ•´æŠ€æœ¯æ–‡æ¡£"
icon: "book"
---

## åŸºç¡€ä¿¡æ¯

<Info>
**ç«¯ç‚¹ï¼š** `https://api.laozhang.ai/v1/chat/completions`

**æ–¹æ³•ï¼š** `POST`

**è®¤è¯ï¼š** Bearer Tokenï¼ˆAPI Keyï¼‰

**å†…å®¹ç±»å‹ï¼š** `application/json`
</Info>

## è®¤è¯

åœ¨è¯·æ±‚å¤´ä¸­åŒ…å«æ‚¨çš„ API å¯†é’¥ï¼š

```bash
Authorization: Bearer YOUR_API_KEY
```

## è¯·æ±‚æ ¼å¼

### åŸºç¡€ç»“æ„

```json
{
  "model": "sora_video2",
  "messages": [
    {
      "role": "user",
      "content": [...]
    }
  ],
  "stream": false
}
```

### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `model` | string | âœ“ | æ¨¡å‹åç§°ï¼Œè§ [æ”¯æŒçš„æ¨¡å‹](#æ”¯æŒçš„æ¨¡å‹) |
| `messages` | array | âœ“ | æ¶ˆæ¯æ•°ç»„ |
| `stream` | boolean | âœ— | æ˜¯å¦å¯ç”¨æµå¼è¾“å‡ºï¼Œé»˜è®¤ `false` |

### Messages æ•°ç»„

æ¯ä¸ª message å¯¹è±¡åŒ…å«ï¼š

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `role` | string | âœ“ | å›ºå®šä¸º `"user"` |
| `content` | array | âœ“ | å†…å®¹æ•°ç»„ï¼ŒåŒ…å«æ–‡æœ¬æˆ–å›¾ç‰‡ |

### Content æ•°ç»„

æ”¯æŒä¸¤ç§ç±»å‹çš„å†…å®¹ï¼š

#### æ–‡æœ¬å†…å®¹

```json
{
  "type": "text",
  "text": "è§†é¢‘æè¿°æ–‡å­—"
}
```

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `type` | string | âœ“ | å›ºå®šä¸º `"text"` |
| `text` | string | âœ“ | è§†é¢‘ç”Ÿæˆæç¤ºè¯ |

#### å›¾ç‰‡å†…å®¹ï¼ˆå¯é€‰ï¼‰

```json
{
  "type": "image_url",
  "image_url": {
    "url": "https://example.com/image.png"
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `type` | string | âœ“ | å›ºå®šä¸º `"image_url"` |
| `image_url.url` | string | âœ“ | å›¾ç‰‡ URL æˆ– Base64 |

<Note>
**å›¾ç‰‡é™åˆ¶**
- æœ€å¤š 1 å¼ å›¾ç‰‡
- æ”¯æŒ URL æˆ– Base64 æ ¼å¼
- æ¨èåˆ†è¾¨ç‡ä¸è¶…è¿‡ 2048Ã—2048
- ä¸æ”¯æŒçœŸäººç…§ç‰‡
</Note>

## æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹å | åˆ†è¾¨ç‡ | æ—¶é•¿ | ä»·æ ¼ |
|--------|--------|------|------|
| `sora_video2` | 704Ã—1280ï¼ˆç«–å±ï¼‰ | 10s | $0.15 |
| `sora_video2-landscape` | 1280Ã—704ï¼ˆæ¨ªå±ï¼‰ | 10s | $0.15 |

<Note>
ç”±äºå®˜æ–¹ OpenAI ç®—åŠ›é™åˆ¶ï¼Œ-hd å’Œ -15s ç‰ˆæœ¬æš‚æ—¶ä¸å¼€æ”¾ã€‚
</Note>

## å“åº”æ ¼å¼

### éæµå¼å“åº”

```json
{
  "id": "foaicmpl-xxx",
  "object": "chat.completion",
  "created": 1759759480,
  "model": "sora_video2",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "```json\n{\n    \"prompt\": \"...\",\n    \"mode\": \"ç«–å±æ¨¡å¼\"\n}\n```\n\n> âœ… è§†é¢‘ç”ŸæˆæˆåŠŸï¼Œ[ç‚¹å‡»è¿™é‡Œ](https://sora.gptkey.asia/assets/sora/xxx.mp4) æŸ¥çœ‹è§†é¢‘~~~\n\n"
      },
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 17,
    "completion_tokens": 244,
    "total_tokens": 261
  }
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `id` | string | è¯·æ±‚å”¯ä¸€æ ‡è¯† |
| `object` | string | å¯¹è±¡ç±»å‹ |
| `created` | integer | åˆ›å»ºæ—¶é—´æˆ³ |
| `model` | string | ä½¿ç”¨çš„æ¨¡å‹ |
| `choices[].message.content` | string | åŒ…å«è§†é¢‘é“¾æ¥çš„å†…å®¹ |
| `choices[].finish_reason` | string | å®ŒæˆåŸå› ï¼Œ`"stop"` è¡¨ç¤ºæˆåŠŸ |
| `usage` | object | Token ä½¿ç”¨ç»Ÿè®¡ |

### æµå¼å“åº”ï¼ˆSSEï¼‰

å¯ç”¨ `"stream": true` æ—¶ï¼Œè¿”å› Server-Sent Events æ ¼å¼ï¼š

```
data: {"id":"foaicmpl-xxx","object":"chat.completion.chunk","created":1759759480,"model":"sora_video2","choices":[{"index":0,"delta":{"role":"assistant"},"finish_reason":null}]}

data: {"id":"foaicmpl-xxx","object":"chat.completion.chunk","created":1759759480,"model":"sora_video2","choices":[{"index":0,"delta":{"content":"```json\n{\n    \"prompt\": \"...\"\n}\n```\n\n"},"finish_reason":null}]}

data: {"id":"foaicmpl-xxx","object":"chat.completion.chunk","created":1759759480,"model":"sora_video2","choices":[{"index":0,"delta":{"content":"> âŒ›ï¸ ä»»åŠ¡æ­£åœ¨é˜Ÿåˆ—ä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…...\n\n"},"finish_reason":null}]}

data: {"id":"foaicmpl-xxx","object":"chat.completion.chunk","created":1759759480,"model":"sora_video2","choices":[{"index":0,"delta":{"content":"> ğŸƒ è¿›åº¦ï¼š36.0%\n\n"},"finish_reason":null}]}

data: {"id":"foaicmpl-xxx","object":"chat.completion.chunk","created":1759759480,"model":"sora_video2","choices":[{"index":0,"delta":{"content":"> âœ… è§†é¢‘ç”ŸæˆæˆåŠŸï¼Œ[ç‚¹å‡»è¿™é‡Œ](https://sora.gptkey.asia/assets/sora/xxx.mp4) æŸ¥çœ‹è§†é¢‘~~~\n\n"},"finish_reason":null}]}

data: {"id":"foaicmpl-xxx","object":"chat.completion.chunk","created":1759759480,"model":"sora_video2","choices":[{"index":0,"delta":{},"finish_reason":"stop"}],"usage":{"prompt_tokens":17,"completion_tokens":244,"total_tokens":261}}

data: [DONE]
```

### æµå¼å“åº”å­—æ®µ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `choices[].delta.role` | string | è§’è‰²ï¼Œä»…ç¬¬ä¸€æ¡æ¶ˆæ¯åŒ…å« |
| `choices[].delta.content` | string | å¢é‡å†…å®¹ï¼ˆè¿›åº¦æˆ–è§†é¢‘é“¾æ¥ï¼‰ |
| `choices[].finish_reason` | string | ä¸º `"stop"` æ—¶è¡¨ç¤ºå®Œæˆ |
| `usage` | object | æœ€åä¸€æ¡æ¶ˆæ¯åŒ…å«ä½¿ç”¨ç»Ÿè®¡ |

## å®Œæ•´ç¤ºä¾‹

### æ–‡ç”Ÿè§†é¢‘

<CodeGroup>

```bash cURL
curl -X POST "https://api.laozhang.ai/v1/chat/completions" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "sora_video2",
    "messages": [
      {
        "role": "user",
        "content": [
          {
            "type": "text",
            "text": "ä¸€åªå¯çˆ±çš„çŒ«å’ªåœ¨é˜³å…‰æ˜åªšçš„èŠ±å›­é‡Œç©çƒ"
          }
        ]
      }
    ]
  }'
```

```python Python
import openai

client = openai.OpenAI(
    api_key="YOUR_API_KEY",
    base_url="https://api.laozhang.ai/v1"
)

response = client.chat.completions.create(
    model="sora_video2",
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "ä¸€åªå¯çˆ±çš„çŒ«å’ªåœ¨é˜³å…‰æ˜åªšçš„èŠ±å›­é‡Œç©çƒ"
                }
            ]
        }
    ]
)

print(response.choices[0].message.content)
```

```javascript JavaScript
const OpenAI = require('openai');

const client = new OpenAI({
  apiKey: 'YOUR_API_KEY',
  baseURL: 'https://api.laozhang.ai/v1'
});

const response = await client.chat.completions.create({
  model: 'sora_video2',
  messages: [
    {
      role: 'user',
      content: [
        {
          type: 'text',
          text: 'ä¸€åªå¯çˆ±çš„çŒ«å’ªåœ¨é˜³å…‰æ˜åªšçš„èŠ±å›­é‡Œç©çƒ'
        }
      ]
    }
  ]
});

console.log(response.choices[0].message.content);
```

</CodeGroup>

### å›¾ç”Ÿè§†é¢‘ï¼ˆURLï¼‰

<CodeGroup>

```bash cURL
curl -X POST "https://api.laozhang.ai/v1/chat/completions" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "sora_video2",
    "messages": [
      {
        "role": "user",
        "content": [
          {
            "type": "text",
            "text": "ç”Ÿæˆè§†é¢‘ï¼šè®©è¿™ä¸ªæ‰‹åŠå½¢è±¡ä»æ¡Œå­ä¸Šè·³å‡ºæ¥ï¼Œå˜æˆæ´»äººçš„ä¸€ä¸ªåœºæ™¯~"
          },
          {
            "type": "image_url",
            "image_url": {
              "url": "https://filesystem.site/cdn/download/20250407/OhFd8JofOAJCsNOCsM1Y794qnkNO3L.png"
            }
          }
        ]
      }
    ]
  }'
```

```python Python
import openai

client = openai.OpenAI(
    api_key="YOUR_API_KEY",
    base_url="https://api.laozhang.ai/v1"
)

response = client.chat.completions.create(
    model="sora_video2",
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "ç”Ÿæˆè§†é¢‘ï¼šè®©è¿™ä¸ªæ‰‹åŠå½¢è±¡ä»æ¡Œå­ä¸Šè·³å‡ºæ¥ï¼Œå˜æˆæ´»äººçš„ä¸€ä¸ªåœºæ™¯~"
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": "https://filesystem.site/cdn/download/20250407/OhFd8JofOAJCsNOCsM1Y794qnkNO3L.png"
                    }
                }
            ]
        }
    ]
)

print(response.choices[0].message.content)
```

</CodeGroup>

### å›¾ç”Ÿè§†é¢‘ï¼ˆBase64ï¼‰

<CodeGroup>

```python Python
import openai
import base64

client = openai.OpenAI(
    api_key="YOUR_API_KEY",
    base_url="https://api.laozhang.ai/v1"
)

# è¯»å–æœ¬åœ°å›¾ç‰‡
def encode_image(image_path):
    with open(image_path, "rb") as image_file:
        return base64.b64encode(image_file.read()).decode('utf-8')

base64_image = encode_image("/path/to/image.png")

response = client.chat.completions.create(
    model="sora_video2",
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "è®©è¿™ä¸ªåœºæ™¯åŠ¨èµ·æ¥"
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": f"data:image/png;base64,{base64_image}"
                    }
                }
            ]
        }
    ]
)

print(response.choices[0].message.content)
```

</CodeGroup>

### æµå¼è¾“å‡º

<CodeGroup>

```python Python
import openai

client = openai.OpenAI(
    api_key="YOUR_API_KEY",
    base_url="https://api.laozhang.ai/v1"
)

stream = client.chat.completions.create(
    model="sora_video2",
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "ä¸€åªå¯çˆ±çš„çŒ«å’ªåœ¨é˜³å…‰æ˜åªšçš„èŠ±å›­é‡Œç©çƒ"
                }
            ]
        }
    ],
    stream=True
)

for chunk in stream:
    if chunk.choices[0].delta.content:
        print(chunk.choices[0].delta.content, end='', flush=True)
```

```javascript JavaScript
const OpenAI = require('openai');

const client = new OpenAI({
  apiKey: 'YOUR_API_KEY',
  baseURL: 'https://api.laozhang.ai/v1'
});

const stream = await client.chat.completions.create({
  model: 'sora_video2',
  messages: [
    {
      role: 'user',
      content: [
        {
          type: 'text',
          text: 'ä¸€åªå¯çˆ±çš„çŒ«å’ªåœ¨é˜³å…‰æ˜åªšçš„èŠ±å›­é‡Œç©çƒ'
        }
      ]
    }
  ],
  stream: true
});

for await (const chunk of stream) {
  if (chunk.choices[0]?.delta?.content) {
    process.stdout.write(chunk.choices[0].delta.content);
  }
}
```

</CodeGroup>

## é”™è¯¯ç 

| HTTP çŠ¶æ€ç  | é”™è¯¯ç±»å‹ | è¯´æ˜ |
|------------|---------|------|
| 400 | Bad Request | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | Unauthorized | API Key æ— æ•ˆæˆ–æœªæä¾› |
| 402 | Payment Required | ä½™é¢ä¸è¶³ |
| 429 | Too Many Requests | è¯·æ±‚è¿‡äºé¢‘ç¹ |
| 500 | Internal Server Error | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |
| 503 | Service Unavailable | æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ |

### é”™è¯¯å“åº”æ ¼å¼

```json
{
  "error": {
    "message": "é”™è¯¯æè¿°",
    "type": "invalid_request_error",
    "code": "invalid_api_key"
  }
}
```

## é€Ÿç‡é™åˆ¶

<Info>
ç›®å‰æš‚æ— ä¸¥æ ¼çš„é€Ÿç‡é™åˆ¶ï¼Œä½†å»ºè®®ï¼š
- æ‰¹é‡ç”Ÿæˆæ—¶æ§åˆ¶å¹¶å‘æ•°ï¼ˆå»ºè®® 2-3 ä¸ªï¼‰
- é¿å…åœ¨çŸ­æ—¶é—´å†…å¤§é‡è¯·æ±‚
- åˆç†è®¾ç½®é‡è¯•é—´éš”
</Info>

## æœ€ä½³å®è·µ

<AccordionGroup>
  <Accordion title="è¶…æ—¶è®¾ç½®" icon="clock">
    è§†é¢‘ç”Ÿæˆéœ€è¦ 2-4 åˆ†é’Ÿï¼Œå»ºè®®è®¾ç½®è¶…æ—¶æ—¶é—´ä¸º **5-10 åˆ†é’Ÿ**ã€‚

    ```python
    import httpx
    import openai

    client = openai.OpenAI(
        api_key="YOUR_API_KEY",
        base_url="https://api.laozhang.ai/v1",
        http_client=httpx.Client(timeout=300.0)  # 5åˆ†é’Ÿ
    )
    ```
  </Accordion>

  <Accordion title="é”™è¯¯å¤„ç†" icon="shield-check">
    æ·»åŠ é‡è¯•é€»è¾‘å¤„ç†ä¸´æ—¶é”™è¯¯ï¼š

    ```python
    import time

    max_retries = 3
    for i in range(max_retries):
        try:
            response = client.chat.completions.create(...)
            break
        except Exception as e:
            if i < max_retries - 1:
                print(f"é”™è¯¯ï¼Œ{30}ç§’åé‡è¯•...")
                time.sleep(30)
            else:
                raise
    ```
  </Accordion>

  <Accordion title="è§†é¢‘ä¸‹è½½" icon="download">
    ç”Ÿæˆåç«‹å³ä¸‹è½½ï¼ˆæœ‰æ•ˆæœŸ 1 å¤©ï¼‰ï¼š

    ```python
    import requests
    import re

    # æå–é“¾æ¥
    video_url = re.search(r'https://[^\s\)]+\.mp4', content).group(0)

    # ä¸‹è½½
    response = requests.get(video_url, stream=True)
    with open('video.mp4', 'wb') as f:
        for chunk in response.iter_content(chunk_size=8192):
            f.write(chunk)
    ```
  </Accordion>

  <Accordion title="æµå¼è¾“å‡ºç›‘æ§" icon="stream">
    ä½¿ç”¨æµå¼è¾“å‡ºå®æ—¶æŸ¥çœ‹è¿›åº¦ï¼š

    ```python
    stream = client.chat.completions.create(
        model="sora_video2",
        messages=[...],
        stream=True
    )

    for chunk in stream:
        if chunk.choices[0].delta.content:
            content = chunk.choices[0].delta.content
            print(content, end='', flush=True)
    ```
  </Accordion>
</AccordionGroup>

## SDK æ”¯æŒ

### å®˜æ–¹ SDK

- **Pythonï¼š** `openai` >= 1.0.0
- **Node.jsï¼š** `openai` >= 4.0.0

### ç¬¬ä¸‰æ–¹ SDK

ä»»ä½•å…¼å®¹ OpenAI API æ ¼å¼çš„ SDK éƒ½å¯ä»¥ä½¿ç”¨ï¼Œåªéœ€ä¿®æ”¹ `base_url`ã€‚

## æŠ€æœ¯è§„æ ¼

| è§„æ ¼ | å€¼ |
|------|-----|
| **è§†é¢‘ç¼–ç ** | H.264 |
| **éŸ³é¢‘ç¼–ç ** | AAC |
| **å¸§ç‡** | 24 fps |
| **æ ¼å¼** | MP4 |
| **æ°´å°** | æ—  |
| **éŸ³é¢‘** | æ”¯æŒ |
| **æœ€å¤§æ–‡ä»¶å¤§å°** | ~50MBï¼ˆè§†æ—¶é•¿å’Œæ¸…æ™°åº¦è€Œå®šï¼‰ |

## ä¸‹ä¸€æ­¥

<CardGroup cols={2}>
  <Card title="å¿«é€Ÿå¼€å§‹" icon="rocket" href="/api-capabilities/sora2/quick-start">
    æŸ¥çœ‹å¿«é€Ÿå¼€å§‹æŒ‡å—
  </Card>
  <Card title="ä½¿ç”¨ç¤ºä¾‹" icon="code" href="/api-capabilities/sora2/examples">
    æŸ¥çœ‹æ›´å¤šä»£ç ç¤ºä¾‹
  </Card>
  <Card title="æ¨¡å‹å®šä»·" icon="tag" href="/api-capabilities/sora2/models-pricing">
    äº†è§£æ¨¡å‹å¯¹æ¯”å’Œä»·æ ¼
  </Card>
  <Card title="å¸¸è§é—®é¢˜" icon="circle-question" href="/api-capabilities/sora2/troubleshooting">
    æŸ¥çœ‹å¸¸è§é—®é¢˜è§£ç­”
  </Card>
</CardGroup>
