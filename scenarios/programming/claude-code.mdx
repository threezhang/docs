---
title: Claude Code 配置教程
sidebarTitle: Claude Code
description: "Claude Code 配置老张API教程：支持 settings.json 配置，支付宝充值，按量计费。完整模型列表和代码示例。"
icon: "terminal"
---

## 工具简介

Claude Code 是 Anthropic 官方推出的命令行编程助手，可以在终端中直接使用 Claude 的强大编程能力。通过配置老张API，您可以获得：

<CardGroup cols={2}>
  <Card title="🚀 稳定服务" icon="wifi">
    高可用性，低延迟响应
  </Card>
  <Card title="💰 经济实惠" icon="piggy-bank">
    无需 Claude Max 200美元订阅
  </Card>
  <Card title="⚡ 高并发支持" icon="bolt">
    不限速访问，多项目并行
  </Card>
  <Card title="🔧 简单配置" icon="wrench">
    几分钟完成全部设置
  </Card>
</CardGroup>

## 快速开始

<Note>
  **简化配置提示**：如果您不想注册 Claude 官网账号，直接查看下方的[项目级配置](#项目级配置推荐)，使用 `.claude.json` 文件可以完全绕过官网验证。
</Note>

### 1. 安装 Claude Code

在终端运行以下命令全局安装：

```bash
npm install -g @anthropic-ai/claude-code
```

<Info>
  需要 Node.js 18 或更高版本。如未安装，请先访问 [nodejs.org](https://nodejs.org) 下载安装。
</Info>

### 2. 获取 API 密钥

1. 访问 [老张API控制台](https://api.laozhang.ai/token)
2. 创建新的令牌，**选择「Claude Code」分组**
3. 复制密钥备用（格式：`sk-...`）

<Warning>
  **重要**：创建令牌时必须选择「Claude Code」分组，否则可能无法正常使用。
</Warning>

### 3. 配置 Claude Code（推荐方式）

编辑 `~/.claude/settings.json` 文件：

```bash
vim ~/.claude/settings.json
```

添加以下内容：

```json
{
    "env": {
      "ANTHROPIC_BASE_URL": "https://api.laozhang.ai",
      "ANTHROPIC_AUTH_TOKEN": "sk-你的老张API密钥",
      "ANTHROPIC_MODEL": "claude-opus-4-5-20251101"
    }
}
```

<Tip>
  **配置说明**：
  - `ANTHROPIC_BASE_URL`：指向老张API代理地址
  - `ANTHROPIC_AUTH_TOKEN`：您的API密钥（从控制台获取）
  - `ANTHROPIC_MODEL`：默认使用的模型（可选）
</Tip>

保存后即可使用，无需重启终端。

### 4. 启动 Claude Code

进入你的项目目录并启动：

```bash
# 进入项目目录
cd ~/Desktop/my-project

# 启动 Claude Code
claude
```

<Info>
  首次启动会显示 API 配置信息，确认无误后即可开始使用。
</Info>

## 模型选择

Claude Code 分组支持以下模型：

| 模型系列 | 模型 ID | 特点 |
|---------|---------|------|
| **Claude Opus 4.5** | `claude-opus-4-5-20251101` | 最新最强，推荐使用 |
| **Claude Opus 4.5 Thinking** | `claude-opus-4-5-20251101-thinking` | 思维链推理模式 |
| **Claude Sonnet 4.5** | `claude-sonnet-4-5-20250929` | 平衡性能与成本 |
| **Claude Opus 4.1** | `claude-opus-4-1-20250805` | 深度推理增强 |
| **Claude Sonnet 4** | `claude-sonnet-4-20250514` | 编程能力出色 |
| **Claude 3.7 Sonnet** | `claude-3-7-sonnet-20250219` | 稳定可靠 |
| **Claude Haiku 4.5** | `claude-haiku-4-5-20251001` | 快速响应，低成本 |
| **Claude 3.5 Sonnet** | `claude-3-5-sonnet-20241022` | 经典稳定版本 |
| **Claude 3.5 Haiku** | `claude-3-5-haiku-20241022` | 轻量快速 |

<Tip>
  带 `-thinking` 后缀的模型支持思维链推理，适合复杂问题分析。
</Tip>

## 使用指南

### 基本命令

启动后，Claude Code 会显示当前配置信息：

```bash
claude
# 显示 API Key 和 API Base URL
# 确认配置无误后选择 Yes 继续
```

### 工作流程

1. **启动助手**：在项目目录运行 `claude`
2. **描述需求**：输入你的编程需求或问题
3. **交互对话**：Claude 会理解上下文并提供代码建议
4. **应用更改**：确认后 Claude 可以直接修改文件

### 支持的功能

- ✅ 代码生成和优化
- ✅ Bug 修复和调试
- ✅ 代码重构建议
- ✅ 文档编写
- ✅ 测试用例生成
- ✅ 技术问题解答
- ✅ 多文件编辑（Agent 模式）

## 故障排除

<AccordionGroup>
  <Accordion title="Unable to Connect to Anthropic Services">
    这通常是网络配置问题。请检查：

    1. 环境变量是否正确设置
    2. API 密钥是否有效
    3. 网络连接是否正常

    运行以下命令验证配置：

    ```bash
    echo $ANTHROPIC_API_KEY
    echo $ANTHROPIC_BASE_URL
    ```
  </Accordion>

  <Accordion title="提示需要 Claude 官网账号授权">
    这是因为没有配置 `hasCompletedOnboarding`。在项目目录创建 `.claude.json` 文件并添加：

    ```json
    {
      "apiKey": "sk-你的老张API密钥",
      "apiBaseUrl": "https://api.laozhang.ai",
      "hasCompletedOnboarding": true
    }
    ```
  </Accordion>

  <Accordion title="API Key 无效">
    确保使用的是老张API的密钥。在 [老张API控制台](https://api.laozhang.ai/token) 检查或生成新密钥。
  </Accordion>

  <Accordion title="如何更新 Claude Code">
    运行以下命令更新到最新版本：

    ```bash
    npm update -g @anthropic-ai/claude-code
    ```
  </Accordion>
</AccordionGroup>

## 最佳实践

### 有效的提示词

```markdown
好的提示：
"帮我重构这个 Python 函数，使其更高效并添加类型注解"
"这段代码有内存泄漏，请帮我找出并修复"
"为这个 React 组件编写单元测试"

避免过于宽泛：
"改进我的代码"  # 太模糊
```

### 性能优化

1. **使用项目配置**：`.claude.json` 配置可避免每次验证，启动更快
2. **保持对话连贯**：在同一会话中处理相关任务
3. **明确需求**：清晰描述可减少往返交互

### 成本控制

- Claude Code 按 Token 使用量计费
- 通过老张API可享受优惠价格
- 查看 [定价页面](/pricing) 了解详情

## 与其他工具对比

| 工具 | Agent 模式 | 优势 | 劣势 |
|------|-----------|------|------|
| **Claude Code** | ✅ | 官方出品，功能完整 | 命令行操作 |
| **Cursor** | ❌ | 界面优雅，补全体验好 | 无 Agent 模式 |
| **Cline (VS Code)** | ✅ | 完整 Agent 功能 | 需要 VS Code |

## 相关资源

<CardGroup cols={2}>
  <Card title="官方文档" icon="book" href="https://docs.anthropic.com/zh-CN/docs/claude-code/setup">
    Claude Code 官方文档
  </Card>
  <Card title="老张API控制台" icon="gear" href="https://api.laozhang.ai/token">
    管理 API 密钥
  </Card>
  <Card title="模型介绍" icon="robot" href="/api-capabilities/model-info">
    了解 Claude 系列模型
  </Card>
  <Card title="Cline 配置" icon="code" href="/scenarios/programming/cline">
    VS Code 中的 AI Agent
  </Card>
</CardGroup>

需要更多帮助？请访问 [老张API官网](https://api.laozhang.ai) 获取支持。

