# Gemini éŸ³é¢‘ç†è§£ API ç¤ºä¾‹

ä½¿ç”¨ Gemini 2.5 Pro æ¨¡å‹è¿›è¡ŒéŸ³é¢‘è½¬å½•ã€åˆ†æå’Œç†è§£ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- âœ… æ”¯æŒéŸ³é¢‘è½¬å½•ï¼ˆè½¬æ–‡å­—ï¼‰
- âœ… æ”¯æŒéŸ³é¢‘å†…å®¹åˆ†æå’Œæ€»ç»“
- âœ… æ”¯æŒå¤šç§éŸ³é¢‘æ ¼å¼ï¼ˆMP3, WAV, M4A, WEBMç­‰ï¼‰
- âœ… è‡ªåŠ¨ä¿å­˜ç»“æœï¼ˆTXT + JSON æ ¼å¼ï¼‰
- âœ… é«˜å‡†ç¡®åº¦çš„ä¸­è‹±æ–‡è¯†åˆ«
- âœ… ä½¿ç”¨ requests åº“ï¼Œæ— éœ€é¢å¤– SDK

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install requests
```

**æ³¨æ„**ï¼šåªéœ€è¦å®‰è£… `requests` åº“ï¼Œä¸éœ€è¦å®‰è£… `openai` åº“ï¼

### 2. é…ç½® API Key

ç¼–è¾‘ `gemini_audio_demo.py`ï¼Œæ‰¾åˆ°ç¬¬ 54 è¡Œï¼Œå°† API Key æ›¿æ¢ä¸ºæ‚¨çš„çœŸå®å¯†é’¥ï¼š

```python
api_key = "sk-your-api-key-here"  # â† æ›¿æ¢ä¸ºæ‚¨çš„å®é™… API Key
```

### 3. è¿è¡Œæµ‹è¯•

```bash
# ä½¿ç”¨é»˜è®¤æµ‹è¯•éŸ³é¢‘
python gemini_audio_demo.py

# æˆ–æŒ‡å®šè‡ªå®šä¹‰éŸ³é¢‘æ–‡ä»¶
python gemini_audio_demo.py /path/to/your/audio.mp3
```

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šéŸ³é¢‘è½¬å½•

```python
from gemini_audio_demo import gemini_audio_analysis

result = gemini_audio_analysis(
    question="è¯·è½¬å½•è¿™æ®µéŸ³é¢‘çš„å†…å®¹",
    audio_path="test_audio.mp3"
)

print(result['result'])
```

### ç¤ºä¾‹ 2ï¼šéŸ³é¢‘å†…å®¹æ€»ç»“

```python
result = gemini_audio_analysis(
    question="è¯·æ€»ç»“è¿™æ®µéŸ³é¢‘çš„ä¸»è¦å†…å®¹",
    audio_path="your_audio.mp3"
)
```

### ç¤ºä¾‹ 3ï¼šéŸ³é¢‘åˆ†æ

```python
result = gemini_audio_analysis(
    question="è¿™æ®µéŸ³é¢‘è®¨è®ºäº†ä»€ä¹ˆä¸»é¢˜ï¼Ÿæƒ…ç»ªå¦‚ä½•ï¼Ÿ",
    audio_path="your_audio.mp3",
    model="gemini-2.5-pro"
)
```

### ç¤ºä¾‹ 4ï¼šè‡ªå®šä¹‰ API Key

```python
result = gemini_audio_analysis(
    question="è¯·è½¬å½•è¿™æ®µéŸ³é¢‘",
    audio_path="test.mp3",
    api_key="sk-your-custom-key"
)
```

## æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹ | ç‰¹ç‚¹ | æ¨èåœºæ™¯ |
|------|------|---------|
| `gemini-2.5-pro` | é«˜å‡†ç¡®åº¦ï¼Œå¼ºå¤§çš„ç†è§£èƒ½åŠ› | ä¸“ä¸šè½¬å½•ã€æ·±åº¦åˆ†æ |
| `gemini-2.0-flash-exp` | é€Ÿåº¦å¿«ï¼Œæˆæœ¬ä½ | å®æ—¶å¤„ç†ã€æ‰¹é‡ä»»åŠ¡ |

## æ”¯æŒçš„éŸ³é¢‘æ ¼å¼

- MP3 (.mp3)
- WAV (.wav)
- M4A (.m4a)
- MP4 éŸ³é¢‘ (.mp4)
- MPEG (.mpeg, .mpga)
- WEBM (.webm)

**æ–‡ä»¶å¤§å°é™åˆ¶**: å»ºè®®ä¸è¶…è¿‡ 20MB

## API å‚æ•°è¯´æ˜

### gemini_audio_analysis()

```python
def gemini_audio_analysis(question, audio_path, model="gemini-2.5-pro", api_key=None)
```

**å‚æ•°:**
- `question` (str, å¿…éœ€): è¦é—®çš„é—®é¢˜
- `audio_path` (str, å¿…éœ€): æœ¬åœ°éŸ³é¢‘æ–‡ä»¶è·¯å¾„
- `model` (str, å¯é€‰): æ¨¡å‹åç§°ï¼Œé»˜è®¤ "gemini-2.5-pro"
- `api_key` (str, å¯é€‰): API å¯†é’¥ï¼Œä¸æä¾›åˆ™ä½¿ç”¨ä»£ç ä¸­çš„é»˜è®¤å€¼

**è¿”å›:** dict
```python
{
    "result": "éŸ³é¢‘è½¬å½•æˆ–åˆ†æç»“æœ",
    "model": "gemini-2.5-pro",
    "audio_path": "/path/to/audio.mp3",
    "question": "è¯·è½¬å½•è¿™æ®µéŸ³é¢‘çš„å†…å®¹",
    "success": True  # æˆ– False
}
```

## è¾“å‡ºæ–‡ä»¶

è¿è¡Œåä¼šè‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š

1. **TXT æ ¼å¼**: `gemini_audio_analysis_YYYYMMDD_HHMMSS.txt`
   - åŒ…å«å®Œæ•´çš„å…ƒæ•°æ®å’Œç»“æœ
   - æ˜“äºé˜…è¯»å’Œåˆ†äº«

2. **JSON æ ¼å¼**: `gemini_audio_analysis_YYYYMMDD_HHMMSS.json`
   - ç»“æ„åŒ–æ•°æ®
   - ä¾¿äºç¨‹åºå¤„ç†

## æç¤ºè¯å»ºè®®

æ ¹æ®ä¸åŒéœ€æ±‚è°ƒæ•´æé—®å†…å®¹ï¼š

| éœ€æ±‚ | æ¨èæç¤ºè¯ |
|------|-----------|
| è½¬å½• | "è¯·è½¬å½•è¿™æ®µéŸ³é¢‘çš„å†…å®¹" |
| æ€»ç»“ | "è¯·ç”¨3-5å¥è¯æ€»ç»“è¿™æ®µéŸ³é¢‘çš„ä¸»è¦å†…å®¹" |
| ç¿»è¯‘ | "è¯·å°†è¿™æ®µéŸ³é¢‘è½¬å½•å¹¶ç¿»è¯‘æˆè‹±æ–‡" |
| åˆ†æ | "è¯·åˆ†æè¿™æ®µéŸ³é¢‘çš„æƒ…ç»ªåŸºè°ƒå’Œè®¨è®ºä¸»é¢˜" |
| æå– | "è¯·æå–éŸ³é¢‘ä¸­æåˆ°çš„å…³é”®æ•°å­—å’Œæ—¥æœŸ" |

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆä½¿ç”¨ requests è€Œä¸æ˜¯ openai åº“ï¼Ÿ

A: ä½¿ç”¨ requests åº“æ›´åŠ è½»é‡çº§ï¼Œä¸éœ€è¦å®‰è£…é¢å¤–çš„ SDKï¼Œä»£ç æ›´ç®€å•æ˜“æ‡‚ï¼Œé€‚åˆå­¦ä¹ å’Œå®šåˆ¶ã€‚

### Q: å¦‚ä½•æé«˜è¯†åˆ«å‡†ç¡®åº¦ï¼Ÿ

A: 
1. ä½¿ç”¨ `gemini-2.5-pro` æ¨¡å‹ï¼ˆå‡†ç¡®åº¦æ›´é«˜ï¼‰
2. æä¾›æ¸…æ™°ã€æ— å™ªéŸ³çš„éŸ³é¢‘
3. ä½¿ç”¨å…·ä½“æ˜ç¡®çš„æç¤ºè¯
4. å¦‚æœæ˜¯ä¸“ä¸šé¢†åŸŸï¼Œå¯ä»¥åœ¨æç¤ºè¯ä¸­æä¾›ä¸Šä¸‹æ–‡

### Q: æ”¯æŒå“ªäº›è¯­è¨€ï¼Ÿ

A: Gemini æ”¯æŒå¤šç§è¯­è¨€ï¼ŒåŒ…æ‹¬ï¼š
- ä¸­æ–‡ï¼ˆç®€ä½“/ç¹ä½“ï¼‰
- è‹±æ–‡
- æ—¥æ–‡
- éŸ©æ–‡
- ä»¥åŠå…¶ä»–ä¸»æµè¯­è¨€

### Q: éŸ³é¢‘å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ

A:
1. ä½¿ç”¨éŸ³é¢‘å‹ç¼©å·¥å…·é™ä½æ¯”ç‰¹ç‡
2. å°†é•¿éŸ³é¢‘åˆ†å‰²ä¸ºå¤šä¸ªç‰‡æ®µ
3. è½¬æ¢ä¸º MP3 æ ¼å¼ï¼ˆé€šå¸¸æ›´å°ï¼‰

### Q: è¿”å› API é”™è¯¯æ€ä¹ˆåŠï¼Ÿ

A:
1. æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤è´¦æˆ·ä½™é¢å……è¶³
3. æ£€æŸ¥ç½‘ç»œè¿æ¥
4. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ä¸­çš„è¯¦ç»†æç¤º

## ä»£ç ç»“æ„

```
audio-API/
â”œâ”€â”€ gemini_audio_demo.py    # æ ¸å¿ƒä»£ç ï¼ˆ270è¡Œï¼‰
â”œâ”€â”€ test_audio.mp3           # æµ‹è¯•éŸ³é¢‘æ–‡ä»¶
â”œâ”€â”€ README.md                # æœ¬æ–‡æ¡£
â””â”€â”€ å¿«é€Ÿå¼€å§‹.md              # å¿«é€Ÿå…¥é—¨æŒ‡å—
```

## æµ‹è¯•éŸ³é¢‘è¯´æ˜

ç›®å½•ä¸­åŒ…å« `test_audio.mp3` æµ‹è¯•æ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
> "è¿™æ˜¯ä¸€æ®µéŸ³é¢‘è½¬å½•æµ‹è¯•ã€‚äººå·¥æ™ºèƒ½æŠ€æœ¯æ­£åœ¨å¿«é€Ÿå‘å±•ï¼Œè¯­éŸ³è¯†åˆ«çš„å‡†ç¡®ç‡è¶Šæ¥è¶Šé«˜ã€‚"

æ‚¨å¯ä»¥ç”¨è‡ªå·±çš„éŸ³é¢‘æ–‡ä»¶æ›¿æ¢æˆ–æ·»åŠ æ›´å¤šæµ‹è¯•æ–‡ä»¶ã€‚

## æŠ€æœ¯è¯´æ˜

### API è°ƒç”¨æ–¹å¼

ä»£ç ä½¿ç”¨æ ‡å‡†çš„ HTTP POST è¯·æ±‚è°ƒç”¨ OpenAI å…¼å®¹çš„ Chat Completions APIï¼š

```python
response = requests.post(
    "https://api.laozhang.ai/v1/chat/completions",
    headers={
        "Content-Type": "application/json",
        "Authorization": f"Bearer {api_key}"
    },
    json=payload
)
```

### éŸ³é¢‘å¤„ç†

éŸ³é¢‘æ–‡ä»¶é€šè¿‡ base64 ç¼–ç ååµŒå…¥åˆ°è¯·æ±‚ä¸­ï¼š

```python
audio_b64 = base64.b64encode(audio_data).decode()
audio_url = f"data:audio/mp3;base64,{audio_b64}"
```

## API è´¹ç”¨

è¯·å‚è€ƒ [è€å¼  API å®šä»·é¡µé¢](https://docs.laozhang.ai/pricing) äº†è§£è¯¦ç»†è´¹ç”¨ä¿¡æ¯ã€‚

## ç›¸å…³èµ„æº

- ğŸ“– [API æ–‡æ¡£](https://docs.laozhang.ai/)
- ğŸ”‘ [è·å– API Key](https://api.laozhang.ai/)
- ğŸ’¬ æŠ€æœ¯æ”¯æŒï¼šå‚è€ƒæ–‡æ¡£ä¸­çš„è”ç³»æ–¹å¼

## è®¸å¯è¯

æœ¬ç¤ºä¾‹ä»£ç ä»…ä¾›å­¦ä¹ å’Œå‚è€ƒä½¿ç”¨ã€‚
